module.exports=[276323,883924,a=>{"use strict";let b;var c=a.i(215388);let d=(a,b)=>{for(let c in a)a.hasOwnProperty(c)&&b(c,a[c])},e=a=>{let b={};return d(a,c=>{((a,b,c)=>{if("function"==typeof c){a[b]=c;return}Object.defineProperty(a,b,{...c})})(b,c,a[c])}),b},f=(a,b,c=null)=>{if(null===c)return a.getAttribute(b)||a.hasAttribute(b);a.setAttribute(b,c)},g=["svg","path"],h=(a,b,c={})=>{"object"==typeof b&&(c=b,b=null);let e=g.includes(a)?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);b&&(g.includes(a)?f(e,"class",b):e.className=b);return d(c,(a,b)=>{f(e,a,b)}),e},i="children"in{}?a=>a.children.length:a=>a.childNodes.length,j=(a,b,c,d)=>{let e=c[0]||a.left,f=c[1]||a.top,g=e+a.width,h=f+a.height*(d[1]||1),i={element:{...a},inner:{left:a.left,top:a.top,right:a.right,bottom:a.bottom},outer:{left:e,top:f,right:g,bottom:h}};return b.filter(a=>!a.isRectIgnored()).map(a=>a.rect).forEach(a=>{k(i.inner,{...a.inner}),k(i.outer,{...a.outer})}),l(i.inner),i.outer.bottom+=i.element.marginBottom,i.outer.right+=i.element.marginRight,l(i.outer),i},k=(a,b)=>{b.top+=a.top,b.right+=a.left,b.bottom+=a.top,b.left+=a.left,b.bottom>a.bottom&&(a.bottom=b.bottom),b.right>a.right&&(a.right=b.right)},l=a=>{a.width=a.right-a.left,a.height=a.bottom-a.top},m=a=>a<.5?2*a*a:-1+(4-2*a)*a,n={spring:({stiffness:a=.5,damping:b=.75,mass:c=10}={})=>{let d=null,f=null,g=0,h=!1,i=e({interpolate:(e,j)=>{if(!h){if("number"!=typeof d||"number"!=typeof f){h=!0,g=0;return}g+=-(f-d)*a/c,f+=g,g*=b,((a,b,c,d=.001)=>Math.abs(a-b)<d&&Math.abs(c)<d)(f,d,g)||j?(f=d,g=0,h=!0,i.onupdate(f),i.oncomplete(f)):i.onupdate(f)}},target:{set:a=>{if("number"==typeof a&&"number"!=typeof f&&(f=a),null===d&&(d=a,f=a),f===(d=a)||void 0===d){h=!0,g=0,i.onupdate(f),i.oncomplete(f);return}h=!1},get:()=>d},resting:{get:()=>h},onupdate:a=>{},oncomplete:a=>{}});return i},tween:({duration:a=500,easing:b=m,delay:c=0}={})=>{let d,f,g=null,h=!0,i=!1,j=null,k=e({interpolate:(e,l)=>{h||null===j||(null===g&&(g=e),e-g<c||((d=e-g-c)>=a||l?(d=1,f=+!i,k.onupdate(f*j),k.oncomplete(f*j),h=!0):(f=d/a,k.onupdate((d>=0?b(i?1-f:f):0)*j))))},target:{get:()=>i?0:j,set:a=>{if(null===j){j=a,k.onupdate(a),k.oncomplete(a);return}a<j?(j=1,i=!0):(i=!1,j=a),h=!1,g=null}},resting:{get:()=>h},onupdate:a=>{},oncomplete:a=>{}});return k}},o=(a,b,c,d=!1)=>{(b=Array.isArray(b)?b:[b]).forEach(b=>{a.forEach(a=>{let e=a,f=()=>c[a],g=b=>c[a]=b;"object"==typeof a&&(e=a.key,f=a.getter||f,g=a.setter||g),(!b[e]||d)&&(b[e]={get:f,set:g})})})},p={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},q={styles:({mixinConfig:a,viewProps:b,viewInternalAPI:c,viewExternalAPI:d,view:e})=>{let f={...b},g={};o(a,[c,d],b);let h=()=>e.rect?j(e.rect,e.childViews,[b.translateX||0,b.translateY||0],[b.scaleX||0,b.scaleY||0]):null;return c.rect={get:h},d.rect={get:h},a.forEach(a=>{b[a]=void 0===f[a]?p[a]:f[a]}),{write:()=>{if(((a,b)=>{if(Object.keys(a).length!==Object.keys(b).length)return!0;for(let c in b)if(b[c]!==a[c])return!0;return!1})(g,b))return((a,{opacity:b,perspective:c,translateX:d,translateY:e,scaleX:f,scaleY:g,rotateX:h,rotateY:i,rotateZ:j,originX:k,originY:l,width:m,height:n})=>{let o="",p="";(null!=k||null!=l)&&(p+=`transform-origin: ${k||0}px ${l||0}px;`),null!=c&&(o+=`perspective(${c}px) `),(null!=d||null!=e)&&(o+=`translate3d(${d||0}px, ${e||0}px, 0) `),(null!=f||null!=g)&&(o+=`scale3d(${null!=f?f:1}, ${null!=g?g:1}, 1) `),null!=j&&(o+=`rotateZ(${j}rad) `),null!=h&&(o+=`rotateX(${h}rad) `),null!=i&&(o+=`rotateY(${i}rad) `),o.length&&(p+=`transform:${o};`),null!=b&&(p+=`opacity:${b};`,0===b&&(p+="visibility:hidden;"),b<1&&(p+="pointer-events:none;")),null!=n&&(p+=`height:${n}px;`),null!=m&&(p+=`width:${m}px;`);let q=a.elementCurrentStyle||"";(p.length!==q.length||p!==q)&&(a.style.cssText=p,a.elementCurrentStyle=p)})(e.element,b),Object.assign(g,{...b}),!0},destroy:()=>{}}},listeners:({mixinConfig:a,viewProps:b,viewInternalAPI:c,viewExternalAPI:d,viewState:e,view:f})=>{let g,h,i=[],j=(g=f.element,(a,b)=>{g.addEventListener(a,b)}),k=(h=f.element,(a,b)=>{h.removeEventListener(a,b)});return d.on=(a,b)=>{i.push({type:a,fn:b}),j(a,b)},d.off=(a,b)=>{i.splice(i.findIndex(c=>c.type===a&&c.fn===b),1),k(a,b)},{write:()=>!0,destroy:()=>{i.forEach(a=>{k(a.type,a.fn)})}}},animations:({mixinConfig:a,viewProps:b,viewInternalAPI:c,viewExternalAPI:e})=>{let f={...b},g=[];return d(a,(a,d)=>{let h,i,j,k=(i="string"==typeof(h=d[void 0]&&"object"==typeof d[void 0][void 0]?d[void 0][void 0]:d[void 0]||d)?h:h.type,j="object"==typeof h?{...h}:{},n[i]?n[i](j):null);k&&(k.onupdate=c=>{b[a]=c},k.target=f[a],o([{key:a,setter:a=>{k.target!==a&&(k.target=a)},getter:()=>b[a]}],[c,e],b,!0),g.push(k))}),{write:a=>{let b=document.hidden,c=!0;return g.forEach(d=>{d.resting||(c=!1),d.interpolate(a,b)}),c},destroy:()=>{}}},apis:({mixinConfig:a,viewProps:b,viewExternalAPI:c})=>{o(a,c,b)}},r=(a={},b={},c={})=>(b.layoutCalculated||(a.paddingTop=parseInt(c.paddingTop,10)||0,a.marginTop=parseInt(c.marginTop,10)||0,a.marginRight=parseInt(c.marginRight,10)||0,a.marginBottom=parseInt(c.marginBottom,10)||0,a.marginLeft=parseInt(c.marginLeft,10)||0,b.layoutCalculated=!0),a.left=b.offsetLeft||0,a.top=b.offsetTop||0,a.width=b.offsetWidth||0,a.height=b.offsetHeight||0,a.right=a.left+a.width,a.bottom=a.top+a.height,a.scrollTop=b.scrollTop,a.hidden=null===b.offsetParent,a),s=({tag:a="div",name:b=null,attributes:c={},read:d=()=>{},write:f=()=>{},create:g=()=>{},destroy:k=()=>{},filterFrameActionsForChild:l=(a,b)=>b,didCreateView:m=()=>{},didWriteView:n=()=>{},ignoreRect:o=!1,ignoreRectUpdate:p=!1,mixins:s=[]}={})=>(t,u={})=>{let v=h(a,`filepond--${b}`,c),w=window.getComputedStyle(v,null),x=r(),y=null,z=!1,A=[],B=[],C={},D={},E=[f],F=[d],G=[k],H=()=>v,I=()=>A.concat(),J=()=>y||(y=j(x,A,[0,0],[1,1])),K={element:{get:H},style:{get:()=>w},childViews:{get:I}},L={...K,rect:{get:J},ref:{get:()=>C},is:a=>b===a,appendChild:(a,b)=>{void 0!==b&&v.children[b]?v.insertBefore(a,v.children[b]):v.appendChild(a)},createChildView:(a,b)=>a(t,b),linkView:a=>(A.push(a),a),unlinkView:a=>{A.splice(A.indexOf(a),1)},appendChildView:(a,b)=>(void 0!==b?A.splice(b,0,a):A.push(a),a),removeChildView:a=>(A.splice(A.indexOf(a),1),a.element.parentNode&&v.removeChild(a.element),a),registerWriter:a=>E.push(a),registerReader:a=>F.push(a),registerDestroyer:a=>G.push(a),invalidateLayout:()=>v.layoutCalculated=!1,dispatch:t.dispatch,query:t.query},M={element:{get:H},childViews:{get:I},rect:{get:J},resting:{get:()=>z},isRectIgnored:()=>o,_read:()=>{y=null,A.forEach(a=>a._read()),p&&x.width&&x.height||r(x,v,w);let a={root:O,props:u,rect:x};F.forEach(b=>b(a))},_write:(a,b,c)=>{let d=0===b.length;return E.forEach(e=>{!1===e({props:u,root:O,actions:b,timestamp:a,shouldOptimize:c})&&(d=!1)}),B.forEach(b=>{!1===b.write(a)&&(d=!1)}),A.filter(a=>!!a.element.parentNode).forEach(e=>{e._write(a,l(e,b),c)||(d=!1)}),A.forEach((e,f)=>{e.element.parentNode||(O.appendChild(e.element,f),e._read(),e._write(a,l(e,b),c),d=!1)}),z=d,n({props:u,root:O,actions:b,timestamp:a}),d},_destroy:()=>{B.forEach(a=>a.destroy()),G.forEach(a=>{a({root:O,props:u})}),A.forEach(a=>a._destroy())}},N={...K,rect:{get:()=>x}};Object.keys(s).sort((a,b)=>"styles"===a?1:"styles"===b?-1:0).forEach(a=>{let b=q[a]({mixinConfig:s[a],viewProps:u,viewState:D,viewInternalAPI:L,viewExternalAPI:M,view:e(N)});b&&B.push(b)});let O=e(L);g({root:O,props:u});let P=i(v);return A.forEach((a,b)=>{O.appendChild(a.element,P+b)}),m(O),e(M)},t=(a,b)=>({root:c,props:d,actions:e=[],timestamp:f,shouldOptimize:g})=>{e.filter(b=>a[b.type]).forEach(b=>a[b.type]({root:c,props:d,action:b.data,timestamp:f,shouldOptimize:g})),b&&b({root:c,props:d,actions:e,timestamp:f,shouldOptimize:g})},u=(a,b)=>b.parentNode.insertBefore(a,b),v=(a,b)=>b.parentNode.insertBefore(a,b.nextSibling),w=a=>a.trim(),x=a=>"boolean"==typeof a?a:"true"===a,y=a=>"string"==typeof a,z=a=>"number"==typeof a?a:y(a)?(""+a).replace(/[a-z]+/gi,""):0,A=a=>parseFloat(z(a)),B=a=>"number"==typeof a&&isFinite(a)&&Math.floor(a)===a,C=(a,b=1e3)=>{if(B(a))return a;let c=(""+a).trim();return/MB$/i.test(c)?parseInt(z(c=c.replace(/MB$i/,"").trim()),10)*b*b:/KB/i.test(c)?parseInt(z(c=c.replace(/KB$i/,"").trim()),10)*b:parseInt(z(c),10)},D={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},E=a=>"object"==typeof a&&null!==a,F=a=>Array.isArray(a)?"array":null===a?"null":B(a)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(a)?"bytes":E(a)&&y(a.url)&&E(a.process)&&E(a.revert)&&E(a.restore)&&E(a.fetch)?"api":typeof a,G={array:(a,b=",")=>null==a?[]:Array.isArray(a)?a:(""+a).split(b).map(w).filter(a=>a.length),boolean:x,int:a=>"bytes"===F(a)?C(a):parseInt(z(a),10),number:A,float:A,bytes:C,string:a=>"function"==typeof a?a:""+a,function:a=>(a=>{let b=self,c=a.split("."),d=null;for(;d=c.shift();)if(!(b=b[d]))return null;return b})(a),serverapi:a=>{let b;return(b={}).url=y(a)?a:a.url||"",b.timeout=a.timeout?parseInt(a.timeout,10):0,b.headers=a.headers?a.headers:{},d(D,c=>{b[c]=((a,b,c,d,e)=>{if(null===b)return null;if("function"==typeof b)return b;let f={url:"GET"===c||"PATCH"===c?`?${a}=`:"",method:c,headers:e,withCredentials:!1,timeout:d,onload:null,ondata:null,onerror:null};if(y(b))return f.url=b,f;if(Object.assign(f,b),y(f.headers)){let a=f.headers.split(/:(.+)/);f.headers={header:a[0],value:a[1]}}return f.withCredentials=x(f.withCredentials),f})(c,a[c],D[c],b.timeout,b.headers)}),b.process=a.process||y(a)||a.url?b.process:null,b.remove=a.remove||null,delete b.headers,b},object:a=>{try{return JSON.parse(a.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(a){return null}}},H=(a,b,c)=>{if(a===b)return a;let d=F(a);if(d!==c){let b,e=(b=a,G[c](b));if(d=F(e),null===e)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${c}"`;a=e}return a},I=(a,b="-")=>a.split(/(?=[A-Z])/).map(a=>a.toLowerCase()).join(b),J=()=>Math.random().toString(36).substring(2,11),K=()=>{let a=[],b=(b,c)=>{let d;d=a.findIndex(a=>a.event===b&&(a.cb===c||!c)),a.splice(d,1)},c=(b,c,d)=>{a.filter(a=>a.event===b).map(a=>a.cb).forEach(a=>{var b;return b=()=>a(...c),void(d?b():document.hidden?Promise.resolve(1).then(b):setTimeout(b,0))})};return{fireSync:(a,...b)=>{c(a,b,!0)},fire:(a,...b)=>{c(a,b,!1)},on:(b,c)=>{a.push({event:b,cb:c})},onOnce:(c,d)=>{a.push({event:c,cb:(...a)=>{b(c,d),d(...a)}})},off:b}},L=(a,b,c)=>{Object.getOwnPropertyNames(a).filter(a=>!c.includes(a)).forEach(c=>Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c)))},M=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],N=a=>{let b={};return L(a,b,M),b},O={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},P={INPUT:1,LIMBO:2,LOCAL:3},Q=()=>{let a;return(a=1.1.toLocaleString(),/[^0-9]+/.exec(a))[0]},R={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},S=[],T=(a,b,c)=>new Promise((d,e)=>{let f=S.filter(b=>b.key===a).map(a=>a.cb);if(0===f.length)return void d(b);let g=f.shift();f.reduce((a,b)=>a.then(a=>b(a,c)),g(b,c)).then(a=>d(a)).catch(a=>e(a))}),U=(a,b,c)=>S.filter(b=>b.key===a).map(a=>a.cb(b,c)),V=(a,b)=>S.push({key:a,cb:b}),W=()=>({...X}),X={id:[null,R.STRING],name:["filepond",R.STRING],disabled:[!1,R.BOOLEAN],className:[null,R.STRING],required:[!1,R.BOOLEAN],captureMethod:[null,R.STRING],allowSyncAcceptAttribute:[!0,R.BOOLEAN],allowDrop:[!0,R.BOOLEAN],allowBrowse:[!0,R.BOOLEAN],allowPaste:[!0,R.BOOLEAN],allowMultiple:[!1,R.BOOLEAN],allowReplace:[!0,R.BOOLEAN],allowRevert:[!0,R.BOOLEAN],allowRemove:[!0,R.BOOLEAN],allowProcess:[!0,R.BOOLEAN],allowReorder:[!1,R.BOOLEAN],allowDirectoriesOnly:[!1,R.BOOLEAN],storeAsFile:[!1,R.BOOLEAN],forceRevert:[!1,R.BOOLEAN],maxFiles:[null,R.INT],checkValidity:[!1,R.BOOLEAN],itemInsertLocationFreedom:[!0,R.BOOLEAN],itemInsertLocation:["before",R.STRING],itemInsertInterval:[75,R.INT],dropOnPage:[!1,R.BOOLEAN],dropOnElement:[!0,R.BOOLEAN],dropValidation:[!1,R.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],R.ARRAY],instantUpload:[!0,R.BOOLEAN],maxParallelUploads:[2,R.INT],allowMinimumUploadDuration:[!0,R.BOOLEAN],chunkUploads:[!1,R.BOOLEAN],chunkForce:[!1,R.BOOLEAN],chunkSize:[5e6,R.INT],chunkRetryDelays:[[500,1e3,3e3],R.ARRAY],server:[null,R.SERVER_API],fileSizeBase:[1e3,R.INT],labelFileSizeBytes:["bytes",R.STRING],labelFileSizeKilobytes:["KB",R.STRING],labelFileSizeMegabytes:["MB",R.STRING],labelFileSizeGigabytes:["GB",R.STRING],labelDecimalSeparator:[Q(),R.STRING],labelThousandsSeparator:[(()=>{let a=Q(),b=1e3.toLocaleString();if("1000"!==b)return/[^0-9]+/.exec(b)[0];return"."===a?",":"."})(),R.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',R.STRING],labelInvalidField:["Field contains invalid files",R.STRING],labelFileWaitingForSize:["Waiting for size",R.STRING],labelFileSizeNotAvailable:["Size not available",R.STRING],labelFileCountSingular:["file in list",R.STRING],labelFileCountPlural:["files in list",R.STRING],labelFileLoading:["Loading",R.STRING],labelFileAdded:["Added",R.STRING],labelFileLoadError:["Error during load",R.STRING],labelFileRemoved:["Removed",R.STRING],labelFileRemoveError:["Error during remove",R.STRING],labelFileProcessing:["Uploading",R.STRING],labelFileProcessingComplete:["Upload complete",R.STRING],labelFileProcessingAborted:["Upload cancelled",R.STRING],labelFileProcessingError:["Error during upload",R.STRING],labelFileProcessingRevertError:["Error during revert",R.STRING],labelTapToCancel:["tap to cancel",R.STRING],labelTapToRetry:["tap to retry",R.STRING],labelTapToUndo:["tap to undo",R.STRING],labelButtonRemoveItem:["Remove",R.STRING],labelButtonAbortItemLoad:["Abort",R.STRING],labelButtonRetryItemLoad:["Retry",R.STRING],labelButtonAbortItemProcessing:["Cancel",R.STRING],labelButtonUndoItemProcessing:["Undo",R.STRING],labelButtonRetryItemProcessing:["Retry",R.STRING],labelButtonProcessItem:["Upload",R.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',R.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],oninit:[null,R.FUNCTION],onwarning:[null,R.FUNCTION],onerror:[null,R.FUNCTION],onactivatefile:[null,R.FUNCTION],oninitfile:[null,R.FUNCTION],onaddfilestart:[null,R.FUNCTION],onaddfileprogress:[null,R.FUNCTION],onaddfile:[null,R.FUNCTION],onprocessfilestart:[null,R.FUNCTION],onprocessfileprogress:[null,R.FUNCTION],onprocessfileabort:[null,R.FUNCTION],onprocessfilerevert:[null,R.FUNCTION],onprocessfile:[null,R.FUNCTION],onprocessfiles:[null,R.FUNCTION],onremovefile:[null,R.FUNCTION],onpreparefile:[null,R.FUNCTION],onupdatefiles:[null,R.FUNCTION],onreorderfiles:[null,R.FUNCTION],beforeDropFile:[null,R.FUNCTION],beforeAddFile:[null,R.FUNCTION],beforeRemoveFile:[null,R.FUNCTION],beforePrepareFile:[null,R.FUNCTION],stylePanelLayout:[null,R.STRING],stylePanelAspectRatio:[null,R.STRING],styleItemPanelAspectRatio:[null,R.STRING],styleButtonRemoveItemPosition:["left",R.STRING],styleButtonProcessItemPosition:["right",R.STRING],styleLoadIndicatorPosition:["right",R.STRING],styleProgressIndicatorPosition:["right",R.STRING],styleButtonRemoveItemAlign:[!1,R.BOOLEAN],files:[[],R.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],R.ARRAY]},Y=(a,b)=>null==b?a[0]||null:B(b)?a[b]||null:("object"==typeof b&&(b=b.id),a.find(a=>a.id===b)||null),Z=a=>{if(null==a)return a;if(/:/.test(a)){let b=a.split(":");return b[1]/b[0]}return parseFloat(a)},$=a=>a.filter(a=>!a.archived),_={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},aa=null,ab=[O.LOAD_ERROR,O.PROCESSING_ERROR,O.PROCESSING_REVERT_ERROR],ac=[O.LOADING,O.PROCESSING,O.PROCESSING_QUEUED,O.INIT],ad=[O.PROCESSING_COMPLETE],ae=a=>ab.includes(a.status),af=a=>ac.includes(a.status),ag=a=>ad.includes(a.status),ah=a=>E(a.options.server)&&(E(a.options.server.process)||"function"==typeof a.options.server.process),ai=a=>({GET_STATUS:()=>{let b=$(a.items),{EMPTY:c,ERROR:d,BUSY:e,IDLE:f,READY:g}=_;return 0===b.length?c:b.some(ae)?d:b.some(af)?e:b.some(ag)?g:f},GET_ITEM:b=>Y(a.items,b),GET_ACTIVE_ITEM:b=>Y($(a.items),b),GET_ACTIVE_ITEMS:()=>$(a.items),GET_ITEMS:()=>a.items,GET_ITEM_NAME:b=>{let c=Y(a.items,b);return c?c.filename:null},GET_ITEM_SIZE:b=>{let c=Y(a.items,b);return c?c.fileSize:null},GET_STYLES:()=>Object.keys(a.options).filter(a=>/^style/.test(a)).map(b=>({name:b,value:a.options[b]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(a.options.stylePanelLayout)?1:Z(a.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>a.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:b=>$(a.items).filter(a=>a.status===b),GET_TOTAL_ITEMS:()=>$(a.items).length,SHOULD_UPDATE_FILE_INPUT:()=>a.options.storeAsFile&&(()=>{if(null===aa)try{let a=new DataTransfer;a.items.add(new File(["hello world"],"This_Works.txt"));let b=document.createElement("input");b.setAttribute("type","file"),b.files=a.files,aa=1===b.files.length}catch(a){aa=!1}return aa})()&&!ah(a),IS_ASYNC:()=>ah(a),GET_FILE_SIZE_LABELS:a=>({labelBytes:a("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:a("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:a("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:a("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),aj=(a,b,c)=>Math.max(Math.min(c,a),b),ak=a=>`${a}`.split("/").pop().split("?").shift(),al=a=>a.split(".").pop(),am=(a,b="")=>(b+a).slice(-b.length),an=(a=new Date)=>`${a.getFullYear()}-${am(a.getMonth()+1,"00")}-${am(a.getDate(),"00")}_${am(a.getHours(),"00")}-${am(a.getMinutes(),"00")}-${am(a.getSeconds(),"00")}`,ao=(a,b,c=null,d=null)=>{let e="string"==typeof c?a.slice(0,a.size,c):a.slice(0,a.size,a.type);return e.lastModifiedDate=new Date,a._relativePath&&(e._relativePath=a._relativePath),y(b)||(b=an()),b&&null===d&&al(b)?e.name=b:(d=d||(a=>{if("string"!=typeof a)return"";let b=a.split("/").pop();return/svg/.test(b)?"svg":/zip|compressed/.test(b)?"zip":/plain/.test(b)?"txt":/msword/.test(b)?"doc":/[a-z]+/.test(b)?"jpeg"===b?"jpg":b:""})(e.type),e.name=b+(d?"."+d:"")),e},ap=(a,b)=>{let c=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(c){let d=new c;return d.append(a),d.getBlob(b)}return new Blob([a],{type:b})},aq=a=>(/^data:(.+);/.exec(a)||[])[1]||null,ar=a=>{if(!/^content-disposition:/i.test(a))return null;let b=a.split(/filename=|filename\*=.+''/).splice(1).map(a=>a.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(a=>a.length);return b.length?decodeURI(b[b.length-1]):null},as=a=>{if(/content-length:/i.test(a)){let b=a.match(/[0-9]+/)[0];return b?parseInt(b,10):null}return null},at=a=>/x-content-transfer-id:/i.test(a)&&(a.split(":")[1]||"").trim()||null,au=a=>{let b={source:null,name:null,size:null};for(let c of a.split("\n")){let a=ar(c);if(a){b.name=a;continue}let d=as(c);if(d){b.size=d;continue}let e=at(c);if(e){b.source=e;continue}}return b},av=(a,b,c)=>{let d,e,f={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{g=!0,i.abort()}},g=!1,h=!1;c={method:"POST",headers:{},withCredentials:!1,...c},b=encodeURI(b),d=c.method,/GET|HEAD/.test(d)&&a&&(b=`${b}${encodeURIComponent("string"==typeof a?a:JSON.stringify(a))}`);let i=new XMLHttpRequest;return((e=c.method,/GET|HEAD/.test(e))?i:i.upload).onprogress=a=>{g||f.onprogress(a.lengthComputable,a.loaded,a.total)},i.onreadystatechange=()=>{i.readyState<2||4===i.readyState&&0===i.status||h||(h=!0,f.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?f.onload(i):f.onerror(i)},i.onerror=()=>f.onerror(i),i.onabort=()=>{g=!0,f.onabort()},i.ontimeout=()=>f.ontimeout(i),i.open(c.method,b,!0),B(c.timeout)&&(i.timeout=c.timeout),Object.keys(c.headers).forEach(a=>{let b=unescape(encodeURIComponent(c.headers[a]));i.setRequestHeader(a,b)}),c.responseType&&(i.responseType=c.responseType),c.withCredentials&&(i.withCredentials=!0),i.send(a),f},aw=(a,b,c,d)=>({type:a,code:b,body:c,headers:d}),ax=a=>b=>{a(aw("error",0,"Timeout",b.getAllResponseHeaders()))},ay=(...a)=>{let b="";return a.forEach(a=>{let c;b+=(c=b,/\?/.test(c)&&/\?/.test(a))?a.replace(/\?/,"&"):a}),b},az=(a="",b)=>{if("function"==typeof b)return b;if(!b||!y(b.url))return null;let c=b.onload||(a=>a),d=b.onerror||(a=>null);return(e,f,g,h,i,j)=>{let k=av(e,ay(a,b.url),{...b,responseType:"blob"});return k.onload=a=>{let d=a.getAllResponseHeaders(),g=au(d).name||ak(e);f(aw("load",a.status,"HEAD"===b.method?null:ao(c(a.response),g),d))},k.onerror=a=>{g(aw("error",a.status,d(a.response)||a.statusText,a.getAllResponseHeaders()))},k.onheaders=a=>{j(aw("headers",a.status,null,a.getAllResponseHeaders()))},k.ontimeout=ax(g),k.onprogress=h,k.onabort=i,k}},aA=(a="",b)=>{if("function"==typeof b)return b;if(!b||!y(b.url))return(a,b)=>b();let c=b.onload||(a=>a),d=b.onerror||(a=>null);return(e,f,g)=>{let h=av(e,a+b.url,b);return h.onload=a=>{f(aw("load",a.status,c(a.response),a.getAllResponseHeaders()))},h.onerror=a=>{g(aw("error",a.status,d(a.response)||a.statusText,a.getAllResponseHeaders()))},h.ontimeout=ax(g),h}},aB=(a=0,b=1)=>a+Math.random()*(b-a),aC=a=>a.substring(0,a.lastIndexOf("."))||a,aD=a=>!!(a instanceof File||a instanceof Blob&&a.name),aE=a=>{if(!E(a))return a;let b=Array.isArray(a)?[]:{};for(let c in a){if(!a.hasOwnProperty(c))continue;let d=a[c];b[c]=d&&E(d)?aE(d):d}return b},aF=(a,b)=>{let c,d,e=(c=a,null==(d=b)?0:y(d)?c.findIndex(a=>a.id===d):-1);if(!(e<0))return a[e]||null},aG=(a,b,c,d,e,f)=>{let g=av(null,a,{method:"GET",responseType:"blob"});return g.onload=c=>{let d=c.getAllResponseHeaders(),e=au(d).name||ak(a);b(aw("load",c.status,ao(c.response,e),d))},g.onerror=a=>{c(aw("error",a.status,a.statusText,a.getAllResponseHeaders()))},g.onheaders=a=>{f(aw("headers",a.status,null,a.getAllResponseHeaders()))},g.ontimeout=ax(c),g.onprogress=d,g.onabort=e,g},aH=a=>(0===a.indexOf("//")&&(a=location.protocol+a),a.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),aI=a=>(...b)=>"function"==typeof a?a(...b):a,aJ=(a,b)=>{clearTimeout(b.listUpdateTimeout),b.listUpdateTimeout=setTimeout(()=>{a("DID_UPDATE_ITEMS",{items:$(b.items)})},0)},aK=(a,...b)=>new Promise(c=>{if(!a)return c(!0);let d=a(...b);return null==d?c(!0):"boolean"==typeof d?c(d):void("function"==typeof d.then&&d.then(c))}),aL=(a,b)=>{a.items.sort((a,c)=>b(N(a),N(c)))},aM=(a,b)=>({query:c,success:d=()=>{},failure:e=()=>{},...f}={})=>{let g=Y(a.items,c);g?b(g,d,e,f||{}):e({error:aw("error",0,"Item not found"),file:null})},aN=(a,b,c)=>({ABORT_ALL:()=>{$(c.items).forEach(a=>{a.freeze(),a.abortLoad(),a.abortProcessing()})},DID_SET_FILES:({value:b=[]})=>{let d=b.map(a=>({source:a.source?a.source:a,options:a.options})),e=$(c.items);e.forEach(b=>{d.find(a=>a.source===b.source||a.source===b.file)||a("REMOVE_ITEM",{query:b,remove:!1})}),e=$(c.items),d.forEach((b,c)=>{e.find(a=>a.source===b.source||a.file===b.source)||a("ADD_ITEM",{...b,interactionMethod:5,index:c})})},DID_UPDATE_ITEM_METADATA:({id:d,action:e,change:f})=>{f.silent||(clearTimeout(c.itemUpdateTimeout),c.itemUpdateTimeout=setTimeout(()=>{var g,h;let i=aF(c.items,d);if(!b("IS_ASYNC"))return void T("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:b,action:e,change:f}).then(c=>{let e=b("GET_BEFORE_PREPARE_FILE");e&&(c=e(i,c)),c&&a("REQUEST_PREPARE_OUTPUT",{query:d,item:i,success:b=>{a("DID_PREPARE_OUTPUT",{id:d,file:b})}},!0)});i.origin===P.LOCAL&&a("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});let j=()=>{setTimeout(()=>{a("REQUEST_ITEM_PROCESSING",{query:d})},32)};i.status===O.PROCESSING_COMPLETE?(g=c.options.instantUpload,i.revert(aA(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(g?j:()=>{}).catch(()=>{})):i.status===O.PROCESSING?(h=c.options.instantUpload,i.abortProcessing().then(h?j:()=>{})):c.options.instantUpload&&j()},0))},MOVE_ITEM:({query:a,index:b})=>{let d=Y(c.items,a);if(!d)return;let e=c.items.indexOf(d);e!==(b=aj(b,0,c.items.length-1))&&c.items.splice(b,0,c.items.splice(e,1)[0])},SORT:({compare:d})=>{aL(c,d),a("DID_SORT_ITEMS",{items:b("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:c,index:d,interactionMethod:e,success:f=()=>{},failure:g=()=>{}})=>{let h=d;if(-1===d||void 0===d){let a=b("GET_ITEM_INSERT_LOCATION"),c=b("GET_TOTAL_ITEMS");h="before"===a?0:c}let i=b("GET_IGNORED_FILES");Promise.all(c.filter(a=>aD(a)?!i.includes(a.name.toLowerCase()):null!=a).map(b=>new Promise((c,d)=>{a("ADD_ITEM",{interactionMethod:e,source:b.source||b,success:c,failure:d,index:h++,options:b.options||{}})}))).then(f).catch(g)},ADD_ITEM:({source:d,index:f=-1,interactionMethod:g,success:h=()=>{},failure:i=()=>{},options:j={}})=>{var k;let l,m,n;if(null==d)return void i({error:aw("error",0,"No source"),file:null});if(aD(d)&&c.options.ignoredFiles.includes(d.name.toLowerCase()))return;if(!(a=>{let b=$(a.items).length;if(!a.options.allowMultiple)return 0===b;let c=a.options.maxFiles;return null===c||!!(b<c)})(c)){if(c.options.allowMultiple||!c.options.allowMultiple&&!c.options.allowReplace){let b=aw("warning",0,"Max files");a("DID_THROW_MAX_FILES",{source:d,error:b}),i({error:b,file:null});return}let e=$(c.items)[0];if(e.status===O.PROCESSING_COMPLETE||e.status===O.PROCESSING_REVERT_ERROR){let k=b("GET_FORCE_REVERT");if(e.revert(aA(c.options.server.url,c.options.server.revert),k).then(()=>{k&&a("ADD_ITEM",{source:d,index:f,interactionMethod:g,success:h,failure:i,options:j})}).catch(()=>{}),k)return}a("REMOVE_ITEM",{query:e.id})}let o="local"===j.type?P.LOCAL:"limbo"===j.type?P.LIMBO:P.INPUT,p=((a=null,b=null,c=null)=>{let d=J(),f={archived:!1,frozen:!1,released:!1,source:null,file:c,serverFileReference:b,transferId:null,processingAborted:!1,status:b?O.PROCESSING_COMPLETE:O.INIT,activeLoader:null,activeProcessor:null},g=null,h={},i=a=>f.status=a,j=(a,...b)=>{f.released||f.frozen||m.fire(a,...b)},k=(a,b)=>{if(f.processingAborted){f.processingAborted=!1;return}if(i(O.PROCESSING),g=null,!(f.file instanceof Blob))return void m.on("load",()=>{k(a,b)});a.on("load",a=>{f.transferId=null,f.serverFileReference=a}),a.on("transfer",a=>{f.transferId=a}),a.on("load-perceived",a=>{f.activeProcessor=null,f.transferId=null,f.serverFileReference=a,i(O.PROCESSING_COMPLETE),j("process-complete",a)}),a.on("start",()=>{j("process-start")}),a.on("error",a=>{f.activeProcessor=null,i(O.PROCESSING_ERROR),j("process-error",a)}),a.on("abort",a=>{f.activeProcessor=null,f.serverFileReference=a,i(O.IDLE),j("process-abort"),g&&g()}),a.on("progress",a=>{j("process-progress",a)});let c=console.error;b(f.file,b=>{f.archived||a.process(b,{...h})},c),f.activeProcessor=a},l=(a,b,c)=>{let d=a.split("."),e=d[0],f=d.pop(),g=h;d.forEach(a=>g=g[a]),JSON.stringify(g[f])!==JSON.stringify(b)&&(g[f]=b,j("metadata-update",{key:e,value:h[e],silent:c}))},m={id:{get:()=>d},origin:{get:()=>a,set:b=>a=b},serverId:{get:()=>f.serverFileReference},transferId:{get:()=>f.transferId},status:{get:()=>f.status},filename:{get:()=>f.file.name},filenameWithoutExtension:{get:()=>aC(f.file.name)},fileExtension:{get:()=>al(f.file.name)},fileType:{get:()=>f.file.type},fileSize:{get:()=>f.file.size},file:{get:()=>f.file},relativePath:{get:()=>f.file._relativePath},source:{get:()=>f.source},getMetadata:a=>aE(a?h[a]:h),setMetadata:(a,b,c)=>E(a)?(Object.keys(a).forEach(c=>{l(c,a[c],b)}),a):(l(a,b,c),b),extend:(a,b)=>n[a]=b,abortLoad:()=>{f.activeLoader?f.activeLoader.abort():(i(O.INIT),j("load-abort"))},retryLoad:()=>{f.activeLoader&&f.activeLoader.load()},requestProcessing:()=>{f.processingAborted=!1,i(O.PROCESSING_QUEUED)},abortProcessing:()=>new Promise(a=>{if(!f.activeProcessor){f.processingAborted=!0,i(O.IDLE),j("process-abort"),a();return}g=()=>{a()},f.activeProcessor.abort()}),load:(b,c,d)=>{(f.source=b,m.fireSync("init"),f.file)?m.fireSync("load-skip"):(f.file=(a=>{let b=[a.name,a.size,a.type];if(a instanceof Blob||/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(a))b[0]=a.name||an();else/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(a)?(b[1]=a.length,b[2]=aq(a)):y(a)&&(b[0]=ak(a),b[1]=0,b[2]="application/octet-stream");return{name:b[0],size:b[1],type:b[2]}})(b),c.on("init",()=>{j("load-init")}),c.on("meta",b=>{f.file.size=b.size,f.file.filename=b.filename,b.source&&(a=P.LIMBO,f.serverFileReference=b.source,f.status=O.PROCESSING_COMPLETE),j("load-meta")}),c.on("progress",a=>{i(O.LOADING),j("load-progress",a)}),c.on("error",a=>{i(O.LOAD_ERROR),j("load-request-error",a)}),c.on("abort",()=>{i(O.INIT),j("load-abort")}),c.on("load",b=>{f.activeLoader=null;let c=b=>{f.file=aD(b)?b:f.file,a===P.LIMBO&&f.serverFileReference?i(O.PROCESSING_COMPLETE):i(O.IDLE),j("load")};f.serverFileReference?c(b):d(b,c,a=>{f.file=b,j("load-meta"),i(O.LOAD_ERROR),j("load-file-error",a)})}),c.setSource(b),f.activeLoader=c,c.load())},process:k,revert:(a,b)=>new Promise((c,d)=>{let e=null!==f.serverFileReference?f.serverFileReference:f.transferId;null===e?c():(a(e,()=>{f.serverFileReference=null,f.transferId=null,c()},a=>{b?(i(O.PROCESSING_REVERT_ERROR),j("process-revert-error"),d(a)):c()}),i(O.IDLE),j("process-revert"))}),...K(),freeze:()=>f.frozen=!0,release:()=>f.released=!0,released:{get:()=>f.released},archive:()=>f.archived=!0,archived:{get:()=>f.archived},setFile:a=>f.file=a},n=e(m);return n})(o,o===P.INPUT?null:d,j.file);Object.keys(j.metadata||{}).forEach(a=>{p.setMetadata(a,j.metadata[a])}),U("DID_CREATE_ITEM",p,{query:b,dispatch:a});let q=b("GET_ITEM_INSERT_LOCATION");c.options.itemInsertLocationFreedom||(f="before"===q?-1:c.items.length),((a,b,c)=>{let d;return null==b||(void 0===c?a.push(b):(c=aj(c,0,a.length),d=c,a.splice(d,0,b)))})(c.items,p,f),"function"==typeof q&&d&&aL(c,q);let r=p.id;p.on("init",()=>{a("DID_INIT_ITEM",{id:r})}),p.on("load-init",()=>{a("DID_START_ITEM_LOAD",{id:r})}),p.on("load-meta",()=>{a("DID_UPDATE_ITEM_META",{id:r})}),p.on("load-progress",b=>{a("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:r,progress:b})}),p.on("load-request-error",b=>{let d=aI(c.options.labelFileLoadError)(b);if(b.code>=400&&b.code<500){a("DID_THROW_ITEM_INVALID",{id:r,error:b,status:{main:d,sub:`${b.code} (${b.body})`}}),i({error:b,file:N(p)});return}a("DID_THROW_ITEM_LOAD_ERROR",{id:r,error:b,status:{main:d,sub:c.options.labelTapToRetry}})}),p.on("load-file-error",b=>{a("DID_THROW_ITEM_INVALID",{id:r,error:b.status,status:b.status}),i({error:b.status,file:N(p)})}),p.on("load-abort",()=>{a("REMOVE_ITEM",{query:r})}),p.on("load-skip",()=>{p.on("metadata-update",b=>{aD(p.file)&&a("DID_UPDATE_ITEM_METADATA",{id:r,change:b})}),a("COMPLETE_LOAD_ITEM",{query:r,item:p,data:{source:d,success:h}})}),p.on("load",()=>{let e=e=>{e?(p.on("metadata-update",b=>{a("DID_UPDATE_ITEM_METADATA",{id:r,change:b})}),T("SHOULD_PREPARE_OUTPUT",!1,{item:p,query:b}).then(e=>{let f=b("GET_BEFORE_PREPARE_FILE");f&&(e=f(p,e));let g=()=>{a("COMPLETE_LOAD_ITEM",{query:r,item:p,data:{source:d,success:h}}),aJ(a,c)};e?a("REQUEST_PREPARE_OUTPUT",{query:r,item:p,success:b=>{a("DID_PREPARE_OUTPUT",{id:r,file:b}),g()}},!0):g()})):a("REMOVE_ITEM",{query:r})};T("DID_LOAD_ITEM",p,{query:b,dispatch:a}).then(()=>{aK(b("GET_BEFORE_ADD_FILE"),N(p)).then(e)}).catch(b=>{if(!b||!b.error||!b.status)return e(!1);a("DID_THROW_ITEM_INVALID",{id:r,error:b.error,status:b.status})})}),p.on("process-start",()=>{a("DID_START_ITEM_PROCESSING",{id:r})}),p.on("process-progress",b=>{a("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:r,progress:b})}),p.on("process-error",b=>{a("DID_THROW_ITEM_PROCESSING_ERROR",{id:r,error:b,status:{main:aI(c.options.labelFileProcessingError)(b),sub:c.options.labelTapToRetry}})}),p.on("process-revert-error",b=>{a("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:r,error:b,status:{main:aI(c.options.labelFileProcessingRevertError)(b),sub:c.options.labelTapToRetry}})}),p.on("process-complete",b=>{a("DID_COMPLETE_ITEM_PROCESSING",{id:r,error:null,serverFileReference:b}),a("DID_DEFINE_VALUE",{id:r,value:b})}),p.on("process-abort",()=>{a("DID_ABORT_ITEM_PROCESSING",{id:r})}),p.on("process-revert",()=>{a("DID_REVERT_ITEM_PROCESSING",{id:r}),a("DID_DEFINE_VALUE",{id:r,value:null})}),a("DID_ADD_ITEM",{id:r,index:f,interactionMethod:g}),aJ(a,c);let{url:s,load:t,restore:u,fetch:v}=c.options.server||{};p.load(d,(k=o===P.INPUT?y(d)&&(d.indexOf(":")>-1||d.indexOf("//")>-1)&&aH(location.href)!==aH(d)&&v?az(s,v):aG:o===P.LIMBO?az(s,u):az(s,t),l={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},m=a=>{k?(l.timestamp=Date.now(),l.request=k(a,b=>{l.duration=Date.now()-l.timestamp,l.complete=!0,b instanceof Blob&&(b=ao(b,b.name||ak(a))),n.fire("load",b instanceof Blob?b:b?b.body:null)},a=>{n.fire("error","string"==typeof a?{type:"error",code:0,body:a}:a)},(a,b,c)=>{if(c&&(l.size=c),l.duration=Date.now()-l.timestamp,!a){l.progress=null;return}l.progress=b/c,n.fire("progress",l.progress)},()=>{n.fire("abort")},a=>{let b=au("string"==typeof a?a:a.headers);n.fire("meta",{size:l.size||b.size,filename:b.name,source:b.source})})):n.fire("error",{type:"error",body:"Can't load URL",code:400})},n={...K(),setSource:a=>l.source=a,getProgress:()=>l.progress,abort:()=>{l.request&&l.request.abort&&l.request.abort()},load:()=>{let a=l.source;if(n.fire("init",a),a instanceof File)n.fire("load",a);else if(a instanceof Blob)n.fire("load",ao(a,a.name));else/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(a)?n.fire("load",ao((a=>{let b=aq(a);var c=atob(a.split(",")[1].replace(/\s/g,""));let d=new ArrayBuffer(c.length),e=new Uint8Array(d);for(let a=0;a<c.length;a++)e[a]=c.charCodeAt(a);return ap(d,b)})(a),void 0,null,void 0)):m(a)}}),(a,c,d)=>{T("LOAD_FILE",a,{query:b}).then(c).catch(d)})},REQUEST_PREPARE_OUTPUT:({item:a,success:c,failure:d=()=>{}})=>{let e={error:aw("error",0,"Item not found"),file:null};if(a.archived)return d(e);T("PREPARE_OUTPUT",a.file,{query:b,item:a}).then(f=>{T("COMPLETE_PREPARE_OUTPUT",f,{query:b,item:a}).then(b=>{if(a.archived)return d(e);c(b)})})},COMPLETE_LOAD_ITEM:({item:d,data:e})=>{let{success:f,source:g}=e,h=b("GET_ITEM_INSERT_LOCATION");if("function"==typeof h&&g&&aL(c,h),a("DID_LOAD_ITEM",{id:d.id,error:null,serverFileReference:d.origin===P.INPUT?null:g}),f(N(d)),d.origin===P.LOCAL)return void a("DID_LOAD_LOCAL_ITEM",{id:d.id});if(d.origin===P.LIMBO){a("DID_COMPLETE_ITEM_PROCESSING",{id:d.id,error:null,serverFileReference:g}),a("DID_DEFINE_VALUE",{id:d.id,value:d.serverId||g});return}b("IS_ASYNC")&&c.options.instantUpload&&a("REQUEST_ITEM_PROCESSING",{query:d.id})},RETRY_ITEM_LOAD:aM(c,a=>{a.retryLoad()}),REQUEST_ITEM_PREPARE:aM(c,(b,c,d)=>{a("REQUEST_PREPARE_OUTPUT",{query:b.id,item:b,success:d=>{a("DID_PREPARE_OUTPUT",{id:b.id,file:d}),c({file:b,output:d})},failure:d},!0)}),REQUEST_ITEM_PROCESSING:aM(c,(d,e,f)=>{if(d.status!==O.IDLE&&d.status!==O.PROCESSING_ERROR){let g=()=>a("REQUEST_ITEM_PROCESSING",{query:d,success:e,failure:f}),h=()=>document.hidden?g():setTimeout(g,32);d.status===O.PROCESSING_COMPLETE||d.status===O.PROCESSING_REVERT_ERROR?d.revert(aA(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(h).catch(()=>{}):d.status===O.PROCESSING&&d.abortProcessing().then(h);return}d.status!==O.PROCESSING_QUEUED&&(d.requestProcessing(),a("DID_REQUEST_ITEM_PROCESSING",{id:d.id}),a("PROCESS_ITEM",{query:d,success:e,failure:f},!0))}),PROCESS_ITEM:aM(c,(d,e,f)=>{let g=b("GET_MAX_PARALLEL_UPLOADS");if(b("GET_ITEMS_BY_STATUS",O.PROCESSING).length===g)return void c.processingQueue.push({id:d.id,success:e,failure:f});if(d.status===O.PROCESSING)return;let h=()=>{let b=c.processingQueue.shift();if(!b)return;let{id:d,success:e,failure:f}=b,g=Y(c.items,d);!g||g.archived?h():a("PROCESS_ITEM",{query:d,success:e,failure:f},!0)};d.onOnce("process-complete",()=>{e(N(d)),h();let f=c.options.server;if(c.options.instantUpload&&d.origin===P.LOCAL&&"function"==typeof f.remove){let a=()=>{};d.origin=P.LIMBO,c.options.server.remove(d.source,a,a)}b("GET_ITEMS_BY_STATUS",O.PROCESSING_COMPLETE).length===c.items.length&&a("DID_COMPLETE_ITEM_PROCESSING_ALL")}),d.onOnce("process-error",a=>{f({error:a,file:N(d)}),h()});let i=c.options;d.process(((a,b)=>{let c={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:d}=b,e=()=>{c.request&&(c.perceivedPerformanceUpdater.clear(),c.request.abort&&c.request.abort(),c.complete=!0)},f=d?()=>c.progress?Math.min(c.progress,c.perceivedProgress):null:()=>c.progress||null,g=d?()=>Math.min(c.duration,c.perceivedDuration):()=>c.duration,h={...K(),process:(b,e)=>{let f=()=>{0!==c.duration&&null!==c.progress&&h.fire("progress",h.getProgress())},g=()=>{c.complete=!0,h.fire("load-perceived",c.response.body)};h.fire("start"),c.timestamp=Date.now(),c.perceivedPerformanceUpdater=((a,b=1e3,c=0,d=25,e=250)=>{let f=null,g=Date.now(),h=()=>{let c=Date.now()-g,i=aB(d,e);c+i>b&&(i=c+i-b);let j=c/b;j>=1||document.hidden?a(1):(a(j),f=setTimeout(h,i))};return b>0&&h(),{clear:()=>{clearTimeout(f)}}})(a=>{c.perceivedProgress=a,c.perceivedDuration=Date.now()-c.timestamp,f(),c.response&&1===c.perceivedProgress&&!c.complete&&g()},d?aB(750,1500):0),c.request=a(b,e,a=>{c.response=E(a)?a:{type:"load",code:200,body:`${a}`,headers:{}},c.duration=Date.now()-c.timestamp,c.progress=1,h.fire("load",c.response.body),(!d||d&&1===c.perceivedProgress)&&g()},a=>{c.perceivedPerformanceUpdater.clear(),h.fire("error",E(a)?a:{type:"error",code:0,body:`${a}`})},(a,b,d)=>{c.duration=Date.now()-c.timestamp,c.progress=a?b/d:null,f()},()=>{c.perceivedPerformanceUpdater.clear(),h.fire("abort",c.response?c.response.body:null)},a=>{h.fire("transfer",a)})},abort:e,getProgress:f,getDuration:g,reset:()=>{e(),c.complete=!1,c.perceivedProgress=0,c.progress=0,c.timestamp=null,c.perceivedDuration=0,c.duration=0,c.request=null,c.response=null}};return h})(((a="",b,c,d)=>"function"==typeof b?(...a)=>b(c,...a,d):b&&y(b.url)?(e,f,g,h,i,j,k)=>{if(!e)return;let l=d.chunkUploads,m=l&&e.size>d.chunkSize,n=l&&(m||d.chunkForce);if(e instanceof Blob&&n)return((a,b,c,d,e,f,g,h,i,j,k)=>{let l=[],{chunkTransferId:m,chunkServer:n,chunkSize:o,chunkRetryDelays:p}=k,q={serverId:m,aborted:!1},r=b.ondata||(a=>a),s=b.onload||((a,b)=>"HEAD"===b?a.getResponseHeader("Upload-Offset"):a.response),t=b.onerror||(a=>null),u=Math.floor(d.size/o);for(let a=0;a<=u;a++){let b=a*o,c=d.slice(b,b+o,"application/offset+octet-stream");l[a]={index:a,size:c.size,offset:b,data:c,file:d,progress:0,retries:[...p],status:0,error:null,request:null,timeout:null}}let v=a=>0===a.status||3===a.status,w=b=>{if(q.aborted)return;if(!(b=b||l.find(v))){l.every(a=>1===a.status)&&f(q.serverId);return}b.status=2,b.progress=null;let c=n.ondata||(a=>a),e=n.onerror||(a=>null),h=ay(a,n.url,q.serverId),j="function"==typeof n.headers?n.headers(b):{...n.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":b.offset,"Upload-Length":d.size,"Upload-Name":d.name},k=b.request=av(c(b.data),h,{...n,headers:j});k.onload=()=>{b.status=1,b.request=null,z()},k.onprogress=(a,c,d)=>{b.progress=a?c:null,y()},k.onerror=a=>{b.status=3,b.request=null,b.error=e(a.response)||a.statusText,x(b)||g(aw("error",a.status,e(a.response)||a.statusText,a.getAllResponseHeaders()))},k.ontimeout=a=>{b.status=3,b.request=null,x(b)||ax(g)(a)},k.onabort=()=>{b.status=0,b.request=null,i()}},x=a=>0!==a.retries.length&&(a.status=4,clearTimeout(a.timeout),a.timeout=setTimeout(()=>{w(a)},a.retries.shift()),!0),y=()=>{let a=l.reduce((a,b)=>null===a||null===b.progress?null:a+b.progress,0);if(null===a)return h(!1,0,0);h(!0,a,l.reduce((a,b)=>a+b.size,0))},z=()=>{l.filter(a=>2===a.status).length>=1||w()};if(q.serverId){let c,d,e;c=ay(a,n.url,q.serverId),(e=av(null,c,d={headers:"function"==typeof b.headers?b.headers(q.serverId):{...b.headers},method:"HEAD"})).onload=a=>(a=>{q.aborted||(l.filter(b=>b.offset<a).forEach(a=>{a.status=1,a.progress=a.size}),z())})(s(a,d.method)),e.onerror=a=>g(aw("error",a.status,t(a.response)||a.statusText,a.getAllResponseHeaders())),e.ontimeout=ax(g)}else{let f,h,i,k;f=new FormData,E(e)&&f.append(c,JSON.stringify(e)),h="function"==typeof b.headers?b.headers(d,e):{...b.headers,"Upload-Length":d.size},i={...b,headers:h},(k=av(r(f),ay(a,b.url),i)).onload=a=>(a=>{q.aborted||(j(a),q.serverId=a,z())})(s(a,i.method)),k.onerror=a=>g(aw("error",a.status,t(a.response)||a.statusText,a.getAllResponseHeaders())),k.ontimeout=ax(g)}return{abort:()=>{q.aborted=!0,l.forEach(a=>{clearTimeout(a.timeout),a.request&&a.request.abort()})}}})(a,b,c,e,f,g,h,i,j,k,d);let o=b.ondata||(a=>a),p=b.onload||(a=>a),q=b.onerror||(a=>null),r="function"==typeof b.headers?b.headers(e,f)||{}:{...b.headers},s={...b,headers:r};var t=new FormData;E(f)&&t.append(c,JSON.stringify(f)),(e instanceof Blob?[{name:null,file:e}]:e).forEach(a=>{t.append(c,a.file,null===a.name?a.file.name:`${a.name}${a.file.name}`)});let u=av(o(t),ay(a,b.url),s);return u.onload=a=>{g(aw("load",a.status,p(a.response),a.getAllResponseHeaders()))},u.onerror=a=>{h(aw("error",a.status,q(a.response)||a.statusText,a.getAllResponseHeaders()))},u.ontimeout=ax(h),u.onprogress=i,u.onabort=j,u}:null)(i.server.url,i.server.process,i.name,{chunkTransferId:d.transferId,chunkServer:i.server.patch,chunkUploads:i.chunkUploads,chunkForce:i.chunkForce,chunkSize:i.chunkSize,chunkRetryDelays:i.chunkRetryDelays}),{allowMinimumUploadDuration:b("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,e,f)=>{T("PREPARE_OUTPUT",c,{query:b,item:d}).then(b=>{a("DID_PREPARE_OUTPUT",{id:d.id,file:b}),e(b)}).catch(f)})}),RETRY_ITEM_PROCESSING:aM(c,b=>{a("REQUEST_ITEM_PROCESSING",{query:b})}),REQUEST_REMOVE_ITEM:aM(c,c=>{aK(b("GET_BEFORE_REMOVE_FILE"),N(c)).then(b=>{b&&a("REMOVE_ITEM",{query:c})})}),RELEASE_ITEM:aM(c,a=>{a.release()}),REMOVE_ITEM:aM(c,(d,e,f,g)=>{let h=()=>{let b=d.id;aF(c.items,b).archive(),a("DID_REMOVE_ITEM",{error:null,id:b,item:d}),aJ(a,c),e(N(d))},i=c.options.server;d.origin===P.LOCAL&&i&&"function"==typeof i.remove&&!1!==g.remove?(a("DID_START_ITEM_REMOVE",{id:d.id}),i.remove(d.source,()=>h(),b=>{a("DID_THROW_ITEM_REMOVE_ERROR",{id:d.id,error:aw("error",0,b,null),status:{main:aI(c.options.labelFileRemoveError)(b),sub:c.options.labelTapToRetry}})})):((g.revert&&d.origin!==P.LOCAL&&null!==d.serverId||c.options.chunkUploads&&d.file.size>c.options.chunkSize||c.options.chunkUploads&&c.options.chunkForce)&&d.revert(aA(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")),h())}),ABORT_ITEM_LOAD:aM(c,a=>{a.abortLoad()}),ABORT_ITEM_PROCESSING:aM(c,b=>{b.serverId?a("REVERT_ITEM_PROCESSING",{id:b.id}):b.abortProcessing().then(()=>{c.options.instantUpload&&a("REMOVE_ITEM",{query:b.id})})}),REQUEST_REVERT_ITEM_PROCESSING:aM(c,d=>{if(!c.options.instantUpload)return void a("REVERT_ITEM_PROCESSING",{query:d});let e=b=>{b&&a("REVERT_ITEM_PROCESSING",{query:d})},f=b("GET_BEFORE_REMOVE_FILE");if(!f)return e(!0);let g=f(N(d));return null==g?e(!0):"boolean"==typeof g?e(g):void("function"==typeof g.then&&g.then(e))}),REVERT_ITEM_PROCESSING:aM(c,d=>{d.revert(aA(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(()=>{(c.options.instantUpload||!aD(d.file))&&a("REMOVE_ITEM",{query:d.id})}).catch(()=>{})}),SET_OPTIONS:({options:b})=>{let c=Object.keys(b),d=aO.filter(a=>c.includes(a));[...d,...Object.keys(b).filter(a=>!d.includes(a))].forEach(c=>{a(`SET_${I(c,"_").toUpperCase()}`,{value:b[c]})})}}),aO=["server"],aP=(a,b)=>{let c=a.childNodes[0];c?b!==c.nodeValue&&(c.nodeValue=b):(c=document.createTextNode(b),a.appendChild(c))},aQ=(a,b,c,d)=>{let e=(d%360-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},aR=s({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:a,props:b})=>{b.spin=!1,b.progress=0,b.opacity=0;let c=h("svg");a.ref.path=h("path",{"stroke-width":2,"stroke-linecap":"round"}),c.appendChild(a.ref.path),a.ref.svg=c,a.appendChild(c)},write:({root:a,props:b})=>{var c,d,e,g,h,i;let j,k,l;if(0===b.opacity)return;b.align&&(a.element.dataset.align=b.align);let m=parseInt(f(a.ref.path,"stroke-width"),10),n=.5*a.rect.element.width,o=0,p=0;b.spin?(o=0,p=.5):(o=0,p=b.progress);let q=(c=n-m,d=o,j=1,(e=p)>d&&e-d<=.5&&(j=0),d>e&&d-e>=.5&&(j=0),g=360*Math.min(.9999,d),h=360*Math.min(.9999,e),i=j,k=aQ(n,n,c,h),l=aQ(n,n,c,g),["M",k.x,k.y,"A",c,c,0,i,0,l.x,l.y].join(" "));f(a.ref.path,"d",q),f(a.ref.path,"stroke-opacity",b.spin||b.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),aS=s({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:a,props:b})=>{a.element.innerHTML=(b.icon||"")+`<span>${b.label}</span>`,b.isDisabled=!1},write:({root:a,props:b})=>{let{isDisabled:c}=b,d=a.query("GET_DISABLED")||0===b.opacity;d&&!c?(b.isDisabled=!0,f(a.element,"disabled","disabled")):!d&&c&&(b.isDisabled=!1,a.element.removeAttribute("disabled"))}}),aT=(a,b=".",c=1e3,d={})=>{let{labelBytes:e="bytes",labelKilobytes:f="KB",labelMegabytes:g="MB",labelGigabytes:h="GB"}=d,i=c*c,j=c*c*c;return(a=Math.round(Math.abs(a)))<c?`${a} ${e}`:a<i?`${Math.floor(a/c)} ${f}`:a<j?`${aU(a/i,1,b)} ${g}`:`${aU(a/j,2,b)} ${h}`},aU=(a,b,c)=>a.toFixed(b).split(".").filter(a=>"0"!==a).join(c),aV=({root:a,props:b})=>{aP(a.ref.fileSize,aT(a.query("GET_ITEM_SIZE",b.id),".",a.query("GET_FILE_SIZE_BASE"),a.query("GET_FILE_SIZE_LABELS",a.query))),aP(a.ref.fileName,a.query("GET_ITEM_NAME",b.id))},aW=({root:a,props:b})=>{B(a.query("GET_ITEM_SIZE",b.id))?aV({root:a,props:b}):aP(a.ref.fileSize,a.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},aX=s({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:t({DID_LOAD_ITEM:aV,DID_UPDATE_ITEM_META:aV,DID_THROW_ITEM_LOAD_ERROR:aW,DID_THROW_ITEM_INVALID:aW}),didCreateView:a=>{U("CREATE_VIEW",{...a,view:a})},create:({root:a,props:b})=>{let c=document.createElement("span");c.className="filepond--file-info-main",f(c,"aria-hidden","true"),a.appendChild(c),a.ref.fileName=c;let d=document.createElement("span");d.className="filepond--file-info-sub",a.appendChild(d),a.ref.fileSize=d,aP(d,a.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),aP(c,a.query("GET_ITEM_NAME",b.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),aY=a=>Math.round(100*a),aZ=({root:a,action:b})=>{let c=null===b.progress?a.query("GET_LABEL_FILE_LOADING"):`${a.query("GET_LABEL_FILE_LOADING")} ${aY(b.progress)}%`;aP(a.ref.main,c),aP(a.ref.sub,a.query("GET_LABEL_TAP_TO_CANCEL"))},a$=({root:a})=>{aP(a.ref.main,""),aP(a.ref.sub,"")},a_=({root:a,action:b})=>{aP(a.ref.main,b.status.main),aP(a.ref.sub,b.status.sub)},a0=s({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:t({DID_LOAD_ITEM:a$,DID_REVERT_ITEM_PROCESSING:a$,DID_REQUEST_ITEM_PROCESSING:({root:a})=>{aP(a.ref.main,a.query("GET_LABEL_FILE_PROCESSING")),aP(a.ref.sub,a.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:a})=>{aP(a.ref.main,a.query("GET_LABEL_FILE_PROCESSING_ABORTED")),aP(a.ref.sub,a.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:a})=>{aP(a.ref.main,a.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),aP(a.ref.sub,a.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:a,action:b})=>{let c=null===b.progress?a.query("GET_LABEL_FILE_PROCESSING"):`${a.query("GET_LABEL_FILE_PROCESSING")} ${aY(b.progress)}%`;aP(a.ref.main,c),aP(a.ref.sub,a.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:aZ,DID_THROW_ITEM_LOAD_ERROR:a_,DID_THROW_ITEM_INVALID:a_,DID_THROW_ITEM_PROCESSING_ERROR:a_,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:a_,DID_THROW_ITEM_REMOVE_ERROR:a_}),didCreateView:a=>{U("CREATE_VIEW",{...a,view:a})},create:({root:a})=>{let b=document.createElement("span");b.className="filepond--file-status-main",a.appendChild(b),a.ref.main=b;let c=document.createElement("span");c.className="filepond--file-status-sub",a.appendChild(c),a.ref.sub=c,aZ({root:a,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),a1={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},a2=[];d(a1,a=>{a2.push(a)});let a3=a=>{if("right"===a7(a))return 0;let b=a.ref.buttonRemoveItem.rect.element;return b.hidden?null:b.width+b.left},a4=a=>a.ref.buttonAbortItemLoad.rect.element.width,a5=a=>Math.floor(a.ref.buttonRemoveItem.rect.element.height/4),a6=a=>Math.floor(a.ref.buttonRemoveItem.rect.element.left/2),a7=a=>a.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),a8={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:a=>a.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:a=>a.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},a9={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:a3},status:{translateX:a3}},ba={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},bb={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:a3},status:{translateX:a3,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:a3},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:a7},info:{translateX:a3},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:a7},buttonRemoveItem:{opacity:1},info:{translateX:a3},status:{opacity:1,translateX:a3}},DID_LOAD_ITEM:a9,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:a3},status:{translateX:a3}},DID_START_ITEM_PROCESSING:ba,DID_REQUEST_ITEM_PROCESSING:ba,DID_UPDATE_ITEM_PROCESS_PROGRESS:ba,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:a3}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:a3},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:a9},bc=s({create:({root:a})=>{a.element.innerHTML=a.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),bd=t({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:a,action:b})=>{a.ref.buttonAbortItemProcessing.label=b.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:a,action:b})=>{a.ref.buttonAbortItemLoad.label=b.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:a,action:b})=>{a.ref.buttonAbortItemRemoval.label=b.value},DID_REQUEST_ITEM_PROCESSING:({root:a})=>{a.ref.processProgressIndicator.spin=!0,a.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:a})=>{a.ref.loadProgressIndicator.spin=!0,a.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:a})=>{a.ref.processProgressIndicator.spin=!0,a.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:a,action:b})=>{a.ref.loadProgressIndicator.spin=!1,a.ref.loadProgressIndicator.progress=b.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:a,action:b})=>{a.ref.processProgressIndicator.spin=!1,a.ref.processProgressIndicator.progress=b.progress}}),be=s({create:({root:a,props:b})=>{let c,e=Object.keys(a1).reduce((a,b)=>(a[b]={...a1[b]},a),{}),{id:f}=b,g=a.query("GET_ALLOW_REVERT"),h=a.query("GET_ALLOW_REMOVE"),i=a.query("GET_ALLOW_PROCESS"),j=a.query("GET_INSTANT_UPLOAD"),k=a.query("IS_ASYNC"),l=a.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");k?i&&!g?c=a=>!/RevertItemProcessing/.test(a):!i&&g?c=a=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(a):i||g||(c=a=>!/Process/.test(a)):c=a=>!/Process/.test(a);let m=c?a2.filter(c):a2.concat();if(j&&g&&(e.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",e.RevertItemProcessing.icon="GET_ICON_REMOVE"),k&&!g){let a=bb.DID_COMPLETE_ITEM_PROCESSING;a.info.translateX=a6,a.info.translateY=a5,a.status.translateY=a5,a.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(k&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(a=>{bb[a].status.translateY=a5}),bb.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=a4),l&&g){e.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";let a=bb.DID_COMPLETE_ITEM_PROCESSING;a.info.translateX=a3,a.status.translateY=a5,a.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}h||(e.RemoveItem.disabled=!0),d(e,(b,c)=>{let d=a.createChildView(aS,{label:a.query(c.label),icon:a.query(c.icon),opacity:0});m.includes(b)&&a.appendChildView(d),c.disabled&&(d.element.setAttribute("disabled","disabled"),d.element.setAttribute("hidden","hidden")),d.element.dataset.align=a.query(`GET_STYLE_${c.align}`),d.element.classList.add(c.className),d.on("click",b=>{b.stopPropagation(),c.disabled||a.dispatch(c.action,{query:f})}),a.ref[`button${b}`]=d}),a.ref.processingCompleteIndicator=a.appendChildView(a.createChildView(bc)),a.ref.processingCompleteIndicator.element.dataset.align=a.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),a.ref.info=a.appendChildView(a.createChildView(aX,{id:f})),a.ref.status=a.appendChildView(a.createChildView(a0,{id:f}));let n=a.appendChildView(a.createChildView(aR,{opacity:0,align:a.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));n.element.classList.add("filepond--load-indicator"),a.ref.loadProgressIndicator=n;let o=a.appendChildView(a.createChildView(aR,{opacity:0,align:a.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));o.element.classList.add("filepond--process-indicator"),a.ref.processProgressIndicator=o,a.ref.activeStyles=[]},write:({root:a,actions:b,props:c})=>{bd({root:a,actions:b,props:c});let e=b.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>bb[a.type]);if(e){a.ref.activeStyles=[];let b=bb[e.type];d(a8,(c,e)=>{let f=a.ref[c];d(e,(d,e)=>{let g=b[c]&&void 0!==b[c][d]?b[c][d]:e;a.ref.activeStyles.push({control:f,key:d,value:g})})})}a.ref.activeStyles.forEach(({control:b,key:c,value:d})=>{b[c]="function"==typeof d?d(a):d})},didCreateView:a=>{U("CREATE_VIEW",{...a,view:a})},name:"file"}),bf=s({create:({root:a,props:b})=>{a.ref.fileName=document.createElement("legend"),a.appendChild(a.ref.fileName),a.ref.file=a.appendChildView(a.createChildView(be,{id:b.id})),a.ref.data=!1},ignoreRect:!0,write:t({DID_LOAD_ITEM:({root:a,props:b})=>{aP(a.ref.fileName,a.query("GET_ITEM_NAME",b.id))}}),didCreateView:a=>{U("CREATE_VIEW",{...a,view:a})},tag:"fieldset",name:"file-wrapper"}),bg={type:"spring",damping:.6,mass:7},bh=s({name:"panel",read:({root:a,props:b})=>b.heightCurrent=a.ref.bottom.translateY,write:({root:a,props:b})=>{if((null===a.ref.scalable||b.scalable!==a.ref.scalable)&&(a.ref.scalable="boolean"!=typeof b.scalable||b.scalable,a.element.dataset.scalable=a.ref.scalable),!b.height)return;let c=a.ref.top.rect.element,d=a.ref.bottom.rect.element,e=Math.max(c.height+d.height,b.height);a.ref.center.translateY=c.height,a.ref.center.scaleY=(e-c.height-d.height)/100,a.ref.bottom.translateY=e-d.height},create:({root:a,props:b})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:bg},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:bg},styles:["translateY"]}}].forEach(c=>{var d,e,f;let g,h;d=a,e=c,f=b.name,g=s({name:`panel-${e.name} filepond--${f}`,mixins:e.mixins,ignoreRectUpdate:!0}),h=d.createChildView(g,e.props),d.ref[e.name]=d.appendChildView(h)}),a.element.classList.add(`filepond--${b.name}`),a.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),bi={type:"spring",stiffness:.75,damping:.45,mass:10},bj="spring",bk={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},bl=t({DID_UPDATE_PANEL_HEIGHT:({root:a,action:b})=>{a.height=b.height}}),bm=s({create:({root:a,props:b})=>{a.ref.handleClick=c=>a.dispatch("DID_ACTIVATE_ITEM",{id:b.id}),a.element.id=`filepond--item-${b.id}`,a.element.addEventListener("click",a.ref.handleClick),a.ref.container=a.appendChildView(a.createChildView(bf,{id:b.id})),a.ref.panel=a.appendChildView(a.createChildView(bh,{name:"item-panel"})),a.ref.panel.height=null,b.markedForRemoval=!1,a.query("GET_ALLOW_REORDER")&&(a.element.dataset.dragState="idle",a.element.addEventListener("pointerdown",c=>{let d,e;if(!c.isPrimary)return;let f=!1,g={x:c.pageX,y:c.pageY};b.dragOrigin={x:a.translateX,y:a.translateY},b.dragCenter={x:c.offsetX,y:c.offsetY};let h=(d=a.query("GET_ACTIVE_ITEMS").map(a=>a.id),{setIndex:a=>{e=a},getIndex:()=>e,getItemIndex:a=>d.indexOf(a.id)});a.dispatch("DID_GRAB_ITEM",{id:b.id,dragState:h});let i=c=>{c.isPrimary&&(c.stopPropagation(),c.preventDefault(),b.dragOffset={x:c.pageX-g.x,y:c.pageY-g.y},b.dragOffset.x*b.dragOffset.x+b.dragOffset.y*b.dragOffset.y>16&&!f&&(f=!0,a.element.removeEventListener("click",a.ref.handleClick)),a.dispatch("DID_DRAG_ITEM",{id:b.id,dragState:h}))},j=a=>{a.isPrimary&&(b.dragOffset={x:a.pageX-g.x,y:a.pageY-g.y},l())},k=()=>{l()},l=()=>{document.removeEventListener("pointercancel",k),document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",j),a.dispatch("DID_DROP_ITEM",{id:b.id,dragState:h}),f&&setTimeout(()=>a.element.addEventListener("click",a.ref.handleClick),0)};document.addEventListener("pointercancel",k),document.addEventListener("pointermove",i),document.addEventListener("pointerup",j)}))},write:t({DID_GRAB_ITEM:({root:a,props:b})=>{b.dragOrigin={x:a.translateX,y:a.translateY}},DID_DRAG_ITEM:({root:a})=>{a.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:a,props:b})=>{b.dragOffset=null,b.dragOrigin=null,a.element.dataset.dragState="drop"}},({root:a,actions:b,props:c,shouldOptimize:d})=>{"drop"===a.element.dataset.dragState&&a.scaleX<=1&&(a.element.dataset.dragState="idle");let e=b.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>bk[a.type]);e&&e.type!==c.currentState&&(c.currentState=e.type,a.element.dataset.filepondItemState=bk[c.currentState]||"");let f=a.query("GET_ITEM_PANEL_ASPECT_RATIO")||a.query("GET_PANEL_ASPECT_RATIO");f?d||(a.height=a.rect.element.width*f):(bl({root:a,actions:b,props:c}),!a.height&&a.ref.container.rect.element.height>0&&(a.height=a.ref.container.rect.element.height)),d&&(a.ref.panel.height=null),a.ref.panel.height=a.height}),destroy:({root:a,props:b})=>{a.element.removeEventListener("click",a.ref.handleClick),a.dispatch("RELEASE_ITEM",{query:b.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:bj,scaleY:bj,translateX:bi,translateY:bi,opacity:{type:"tween",duration:150}}}});var bn=(a,b)=>Math.max(1,Math.floor((a+1)/b));let bo=(a,b,c)=>{if(!c)return;let d=a.rect.element.width,e=b.length,f=null;if(0===e||c.top<b[0].rect.element.top)return -1;let g=b[0].rect.element,h=g.marginLeft+g.marginRight,i=g.width+h,j=bn(d,i);if(1===j){for(let a=0;a<e;a++){let d=b[a],e=d.rect.outer.top+.5*d.rect.element.height;if(c.top<e)return a}return e}let k=g.marginTop+g.marginBottom,l=g.height+k;for(let a=0;a<e;a++){let b=a%j*i,d=Math.floor(a/j)*l,h=d-g.marginTop,k=b+i,m=d+l+g.marginBottom;if(c.top<m&&c.top>h)if(c.left<k)return a;else f=a!==e-1?a:null}return null!==f?f:e},bp={height:0,width:0,get getHeight(){return this.height},set setHeight(val){(0===this.height||0===val)&&(this.height=val)},get getWidth(){return this.width},set setWidth(val){(0===this.width||0===val)&&(this.width=val)},setDimensions:function(a,b){(0===this.height||0===a)&&(this.height=a),(0===this.width||0===b)&&(this.width=b)}},bq=(a,b,c,d=0,e=1)=>{a.dragOffset?(a.translateX=null,a.translateY=null,a.translateX=a.dragOrigin.x+a.dragOffset.x,a.translateY=a.dragOrigin.y+a.dragOffset.y,a.scaleX=1.025,a.scaleY=1.025):(a.translateX=b,a.translateY=c,Date.now()>a.spawnDate&&(0===a.opacity&&br(a,b,c,d,e),a.scaleX=1,a.scaleY=1,a.opacity=1))},br=(a,b,c,d,e)=>{5===a.interactionMethod?(a.translateX=null,a.translateX=b,a.translateY=null,a.translateY=c):2===a.interactionMethod?(a.translateX=null,a.translateX=b-20*d,a.translateY=null,a.translateY=c-10*e,a.scaleX=.8,a.scaleY=.8):3===a.interactionMethod?(a.translateY=null,a.translateY=c-30):1===a.interactionMethod&&(a.translateX=null,a.translateX=b-30,a.translateY=null)},bs=a=>a.rect.element.height+.5*a.rect.element.marginBottom+.5*a.rect.element.marginTop,bt=t({DID_ADD_ITEM:({root:a,action:b})=>{let{id:c,index:d,interactionMethod:e}=b;a.ref.addIndex=d;let f=Date.now(),g=f,h=1;if(5!==e){h=0;let b=a.query("GET_ITEM_INSERT_INTERVAL"),c=f-a.ref.lastItemSpanwDate;g=c<b?f+(b-c):f}a.ref.lastItemSpanwDate=g,a.appendChildView(a.createChildView(bm,{spawnDate:g,id:c,opacity:h,interactionMethod:e}),d)},DID_REMOVE_ITEM:({root:a,action:b})=>{let{id:c}=b,d=a.childViews.find(a=>a.id===c);d&&(d.scaleX=.9,d.scaleY=.9,d.opacity=0,d.markedForRemoval=!0)},DID_DRAG_ITEM:({root:a,action:b})=>{let{id:c,dragState:d}=b,e=a.query("GET_ITEM",{id:c}),f=a.childViews.find(a=>a.id===c),g=a.childViews.length,h=d.getItemIndex(e);if(!f)return;let i={x:f.dragOrigin.x+f.dragOffset.x+f.dragCenter.x,y:f.dragOrigin.y+f.dragOffset.y+f.dragCenter.y},j=bs(f),k=f.rect.element.width+.5*f.rect.element.marginLeft+.5*f.rect.element.marginRight,l=Math.floor(a.rect.outer.width/k);l>g&&(l=g),bp.setHeight=j*Math.floor(g/l+1),bp.setWidth=k*l;var m={y:Math.floor(i.y/j),x:Math.floor(i.x/k),getGridIndex:function(){return i.y>bp.getHeight||i.y<0||i.x>bp.getWidth||i.x<0?h:this.y*l+this.x},getColIndex:function(){let b=a.query("GET_ACTIVE_ITEMS"),c=a.childViews.filter(a=>a.rect.element.height),d=b.map(a=>c.find(b=>b.id===a.id)),e=d.findIndex(a=>a===f),g=bs(f),h=d.length,j=h,k=0,l=0,m=0;for(let a=0;a<h;a++)if(k=bs(d[a]),l=(m=l)+k,i.y<l){if(e>a){if(i.y<m+g){j=a;break}continue}j=a;break}return j}};let n=l>1?m.getGridIndex():m.getColIndex();a.dispatch("MOVE_ITEM",{query:f,index:n});let o=d.getIndex();if(void 0===o||o!==n){if(d.setIndex(n),void 0===o)return;a.dispatch("DID_REORDER_ITEMS",{items:a.query("GET_ACTIVE_ITEMS"),origin:h,target:n})}}}),bu=s({create:({root:a})=>{f(a.element,"role","list"),a.ref.lastItemSpanwDate=Date.now()},write:({root:a,props:b,actions:c,shouldOptimize:d})=>{bt({root:a,props:b,actions:c});let{dragCoordinates:e}=b,f=a.rect.element.width,g=a.childViews.filter(a=>a.rect.element.height),h=a.query("GET_ACTIVE_ITEMS").map(a=>g.find(b=>b.id===a.id)).filter(a=>a),i=e?bo(a,h,e):null,j=a.ref.addIndex||null;a.ref.addIndex=null;let k=0,l=0,m=0;if(0===h.length)return;let n=h[0].rect.element,o=n.marginTop+n.marginBottom,p=n.marginLeft+n.marginRight,q=n.width+p,r=n.height+o,s=bn(f,q);if(1===s){let a=0,b=0;h.forEach((c,e)=>{if(i){let a=e-i;b=-2===a?-(.25*o):-1===a?-(.75*o):0===a?.75*o:1===a?.25*o:0}d&&(c.translateX=null,c.translateY=null),c.markedForRemoval||bq(c,0,a+b);let f=(c.rect.element.height+o)*(c.markedForRemoval?c.opacity:1);a+=f})}else{let a=0,b=0;h.forEach((c,e)=>{e===i&&(k=1),e===j&&(m+=1),c.markedForRemoval&&c.opacity<.5&&(l-=1);let f=e+m+k+l,g=Math.floor(f/s),h=f%s*q,n=g*r,o=Math.sign(h-a),p=Math.sign(n-b);a=h,b=n,c.markedForRemoval||(d&&(c.translateX=null,c.translateY=null),bq(c,h,n,o,p))})}},tag:"ul",name:"list",didWriteView:({root:a})=>{a.childViews.filter(a=>a.markedForRemoval&&0===a.opacity&&a.resting).forEach(b=>{b._destroy(),a.removeChildView(b)})},filterFrameActionsForChild:(a,b)=>b.filter(b=>!b.data||!b.data.id||a.id===b.data.id),mixins:{apis:["dragCoordinates"]}}),bv=t({DID_DRAG:({root:a,props:b,action:c})=>{a.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(b.dragCoordinates={left:c.position.scopeLeft-a.ref.list.rect.element.left,top:c.position.scopeTop-(a.rect.outer.top+a.rect.element.marginTop+a.rect.element.scrollTop)})},DID_END_DRAG:({props:a})=>{a.dragCoordinates=null}}),bw=s({create:({root:a,props:b})=>{a.ref.list=a.appendChildView(a.createChildView(bu)),b.dragCoordinates=null,b.overflowing=!1},write:({root:a,props:b,actions:c})=>{if(bv({root:a,props:b,actions:c}),a.ref.list.dragCoordinates=b.dragCoordinates,b.overflowing&&!b.overflow&&(b.overflowing=!1,a.element.dataset.state="",a.height=null),b.overflow){let c=Math.round(b.overflow);c!==a.height&&(b.overflowing=!0,a.element.dataset.state="overflow",a.height=c)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),bx=(a,b,c,d="")=>{c?f(a,b,d):a.removeAttribute(b)},by=({root:a,action:b})=>{a.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&bx(a.element,"accept",!!b.value,b.value?b.value.join(","):"")},bz=({root:a,action:b})=>{bx(a.element,"multiple",b.value)},bA=({root:a,action:b})=>{bx(a.element,"webkitdirectory",b.value)},bB=({root:a})=>{let b=a.query("GET_DISABLED"),c=a.query("GET_ALLOW_BROWSE");bx(a.element,"disabled",b||!c)},bC=({root:a,action:b})=>{b.value?0===a.query("GET_TOTAL_ITEMS")&&bx(a.element,"required",!0):bx(a.element,"required",!1)},bD=({root:a,action:b})=>{bx(a.element,"capture",!!b.value,!0===b.value?"":b.value)},bE=({root:a})=>{let{element:b}=a;a.query("GET_TOTAL_ITEMS")>0?(bx(b,"required",!1),bx(b,"name",!1)):(bx(b,"name",!0,a.query("GET_NAME")),a.query("GET_CHECK_VALIDITY")&&b.setCustomValidity(""),a.query("GET_REQUIRED")&&bx(b,"required",!0))},bF=s({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:a,props:b})=>{a.element.id=`filepond--browser-${b.id}`,f(a.element,"name",a.query("GET_NAME")),f(a.element,"aria-controls",`filepond--assistant-${b.id}`),f(a.element,"aria-labelledby",`filepond--drop-label-${b.id}`),by({root:a,action:{value:a.query("GET_ACCEPTED_FILE_TYPES")}}),bz({root:a,action:{value:a.query("GET_ALLOW_MULTIPLE")}}),bA({root:a,action:{value:a.query("GET_ALLOW_DIRECTORIES_ONLY")}}),bB({root:a}),bC({root:a,action:{value:a.query("GET_REQUIRED")}}),bD({root:a,action:{value:a.query("GET_CAPTURE_METHOD")}}),a.ref.handleChange=c=>{if(!a.element.value)return;let d=Array.from(a.element.files).map(a=>(a._relativePath=a.webkitRelativePath,a));setTimeout(()=>{b.onload(d),(a=>{if(a&&""!==a.value){try{a.value=""}catch(a){}if(a.value){let b=document.createElement("form"),c=a.parentNode,d=a.nextSibling;b.appendChild(a),b.reset(),d?c.insertBefore(a,d):c.appendChild(a)}}})(a.element)},250)},a.element.addEventListener("change",a.ref.handleChange)},destroy:({root:a})=>{a.element.removeEventListener("change",a.ref.handleChange)},write:t({DID_LOAD_ITEM:bE,DID_REMOVE_ITEM:bE,DID_THROW_ITEM_INVALID:({root:a})=>{a.query("GET_CHECK_VALIDITY")&&a.element.setCustomValidity(a.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:bB,DID_SET_ALLOW_BROWSE:bB,DID_SET_ALLOW_DIRECTORIES_ONLY:bA,DID_SET_ALLOW_MULTIPLE:bz,DID_SET_ACCEPTED_FILE_TYPES:by,DID_SET_CAPTURE_METHOD:bD,DID_SET_REQUIRED:bC})}),bG=(a,b)=>{a.innerHTML=b;let c=a.querySelector(".filepond--label-action");return c&&f(c,"tabindex","0"),b},bH=s({name:"drop-label",ignoreRect:!0,create:({root:a,props:b})=>{let c=document.createElement("label");f(c,"for",`filepond--browser-${b.id}`),f(c,"id",`filepond--drop-label-${b.id}`),f(c,"aria-hidden","true"),a.ref.handleKeyDown=b=>{(13===b.keyCode||32===b.keyCode)&&(b.preventDefault(),a.ref.label.click())},a.ref.handleClick=b=>{b.target===c||c.contains(b.target)||a.ref.label.click()},c.addEventListener("keydown",a.ref.handleKeyDown),a.element.addEventListener("click",a.ref.handleClick),bG(c,b.caption),a.appendChild(c),a.ref.label=c},destroy:({root:a})=>{a.ref.label.addEventListener("keydown",a.ref.handleKeyDown),a.element.removeEventListener("click",a.ref.handleClick)},write:t({DID_SET_LABEL_IDLE:({root:a,action:b})=>{bG(a.ref.label,b.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),bI=s({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),bJ=t({DID_DRAG:({root:a,action:b})=>{a.ref.blob?(a.ref.blob.translateX=b.position.scopeLeft,a.ref.blob.translateY=b.position.scopeTop,a.ref.blob.scaleX=1,a.ref.blob.scaleY=1,a.ref.blob.opacity=1):(({root:a})=>{let b=.5*a.rect.element.width,c=.5*a.rect.element.height;a.ref.blob=a.appendChildView(a.createChildView(bI,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:b,translateY:c}))})({root:a})},DID_DROP:({root:a})=>{a.ref.blob&&(a.ref.blob.scaleX=2.5,a.ref.blob.scaleY=2.5,a.ref.blob.opacity=0)},DID_END_DRAG:({root:a})=>{a.ref.blob&&(a.ref.blob.opacity=0)}}),bK=s({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:a,props:b,actions:c})=>{bJ({root:a,props:b,actions:c});let{blob:d}=a.ref;0===c.length&&d&&0===d.opacity&&(a.removeChildView(d),a.ref.blob=null)}}),bL=(a,b)=>{try{let c=new DataTransfer;b.forEach(a=>{a instanceof File?c.items.add(a):c.items.add(new File([a],a.name,{type:a.type}))}),a.files=c.files}catch(a){return!1}return!0},bM=(a,b)=>a.ref.fields[b],bN=a=>{a.query("GET_ACTIVE_ITEMS").forEach(b=>{a.ref.fields[b.id]&&a.element.appendChild(a.ref.fields[b.id])})},bO=({root:a})=>bN(a),bP=s({tag:"fieldset",name:"data",create:({root:a})=>a.ref.fields={},write:t({DID_SET_DISABLED:({root:a})=>{a.element.disabled=a.query("GET_DISABLED")},DID_ADD_ITEM:({root:a,action:b})=>{let c=a.query("GET_ITEM",b.id).origin!==P.LOCAL&&a.query("SHOULD_UPDATE_FILE_INPUT"),d=document.createElement("input");d.type=c?"file":"hidden",d.name=a.query("GET_NAME"),d.disabled=a.query("GET_DISABLED"),a.ref.fields[b.id]=d,bN(a)},DID_LOAD_ITEM:({root:a,action:b})=>{let c=bM(a,b.id);!c||(null!==b.serverFileReference&&(c.value=b.serverFileReference),a.query("SHOULD_UPDATE_FILE_INPUT")&&bL(c,[a.query("GET_ITEM",b.id).file]))},DID_REMOVE_ITEM:({root:a,action:b})=>{let c=bM(a,b.id);c&&(c.parentNode&&c.parentNode.removeChild(c),delete a.ref.fields[b.id])},DID_DEFINE_VALUE:({root:a,action:b})=>{let c=bM(a,b.id);c&&(null===b.value?c.removeAttribute("value"):"file"!=c.type&&(c.value=b.value),bN(a))},DID_PREPARE_OUTPUT:({root:a,action:b})=>{a.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{let c=bM(a,b.id);c&&bL(c,[b.file])},0)},DID_REORDER_ITEMS:bO,DID_SORT_ITEMS:bO}),ignoreRect:!0}),bQ=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],bR=["css","csv","html","txt"],bS={zip:"zip|compressed",epub:"application/epub+zip"},bT=(a="")=>(a=a.toLowerCase(),bQ.includes(a))?"image/"+("jpg"===a?"jpeg":"svg"===a?"svg+xml":a):bR.includes(a)?"text/"+a:bS[a]||"",bU=a=>new Promise((b,c)=>{let d=b2(a);if(d.length&&!bV(a))return b(d);bW(a).then(b)}),bV=a=>!!a.files&&a.files.length>0,bW=a=>new Promise((b,c)=>{let d=(a.items?Array.from(a.items):[]).filter(a=>bX(a)).map(a=>bY(a));d.length?Promise.all(d).then(a=>{let c=[];a.forEach(a=>{c.push.apply(c,a)}),b(c.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error):b(a.files?Array.from(a.files):[])}),bX=a=>{if(b0(a)){let b=b1(a);if(b)return b.isFile||b.isDirectory}return"file"===a.kind},bY=a=>new Promise((b,c)=>{b_(a)?bZ(b1(a)).then(b).catch(c):b([a.getAsFile()])}),bZ=a=>new Promise((b,c)=>{let d=[],e=0,f=0,g=()=>{0===f&&0===e&&b(d)},h=a=>{e++;let b=a.createReader(),i=()=>{b.readEntries(a=>{if(0===a.length){e--,g();return}a.forEach(a=>{a.isDirectory?h(a):(f++,a.file(b=>{let c=b$(b);a.fullPath&&(c._relativePath=a.fullPath),d.push(c),f--,g()}))}),i()},c)};i()};h(a)}),b$=a=>{if(a.type.length)return a;let b=a.lastModifiedDate,c=a.name,d=bT(al(a.name));return d.length&&((a=a.slice(0,a.size,d)).name=c,a.lastModifiedDate=b),a},b_=a=>b0(a)&&(b1(a)||{}).isDirectory,b0=a=>"webkitGetAsEntry"in a,b1=a=>a.webkitGetAsEntry(),b2=a=>{let b=[];try{if((b=b4(a)).length)return b;b=b3(a)}catch(a){}return b},b3=a=>{let b=a.getData("url");return"string"==typeof b&&b.length?[b]:[]},b4=a=>{let b=a.getData("text/html");if("string"==typeof b&&b.length){let a=b.match(/src\s*=\s*"(.+?)"/);if(a)return[a[1]]}return[]},b5=[],b6=a=>({pageLeft:a.pageX,pageTop:a.pageY,scopeLeft:a.offsetX||a.layerX,scopeTop:a.offsetY||a.layerY}),b7=a=>{let b=[],c={dragenter:cb,dragover:cc,dragleave:ce,drop:cd},e={};d(c,(c,d)=>{e[c]=d(a,b),a.addEventListener(c,e[c],!1)});let f={element:a,addListener:g=>(b.push(g),()=>{b.splice(b.indexOf(g),1),0===b.length&&(b5.splice(b5.indexOf(f),1),d(c,b=>{a.removeEventListener(b,e[b],!1)}))})};return f},b8=(a,b)=>{var c,d;let e=(c="getRootNode"in b?b.getRootNode():document,d={x:a.pageX-window.pageXOffset,y:a.pageY-window.pageYOffset},"elementFromPoint"in c||(c=document),c.elementFromPoint(d.x,d.y));return e===b||b.contains(e)},b9=null,ca=(a,b)=>{try{a.dropEffect=b}catch(a){}},cb=(a,b)=>a=>{a.preventDefault(),b9=a.target,b.forEach(b=>{let{element:c,onenter:d}=b;b8(a,c)&&(b.state="enter",d(b6(a)))})},cc=(a,b)=>a=>{a.preventDefault();let c=a.dataTransfer;bU(c).then(d=>{let e=!1;b.some(b=>{let{filterElement:f,element:g,onenter:h,onexit:i,ondrag:j,allowdrop:k}=b;ca(c,"copy");let l=k(d);if(!l)return void ca(c,"none");if(b8(a,g)){if(e=!0,null===b.state){b.state="enter",h(b6(a));return}if(b.state="over",f&&!l)return void ca(c,"none");j(b6(a))}else f&&!e&&ca(c,"none"),b.state&&(b.state=null,i(b6(a)))})})},cd=(a,b)=>a=>{a.preventDefault(),bU(a.dataTransfer).then(c=>{b.forEach(b=>{let{filterElement:d,element:e,ondrop:f,onexit:g,allowdrop:h}=b;if(b.state=null,!d||b8(a,e)){if(!h(c))return g(b6(a));f(b6(a),c)}})})},ce=(a,b)=>a=>{b9===a.target&&b.forEach(b=>{let{onexit:c}=b;b.state=null,c(b6(a))})},cf=!1,cg=[],ch=a=>{let b=document.activeElement;if(b&&/textarea|input/i.test(b.nodeName)){let a=!1,c=b;for(;c!==document.body;){if(c.classList.contains("filepond--root")){a=!0;break}c=c.parentNode}if(!a)return}bU(a.clipboardData).then(a=>{a.length&&cg.forEach(b=>b(a))})},ci=null,cj=null,ck=[],cl=(a,b)=>{a.element.textContent=b},cm=(a,b,c)=>{let d=a.query("GET_TOTAL_ITEMS");cl(a,`${c} ${b}, ${d} ${1===d?a.query("GET_LABEL_FILE_COUNT_SINGULAR"):a.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(cj),cj=setTimeout(()=>{a.element.textContent=""},1500)},cn=a=>a.element.parentNode.contains(document.activeElement),co=({root:a,action:b})=>{let c=a.query("GET_ITEM",b.id).filename,d=a.query("GET_LABEL_FILE_PROCESSING_ABORTED");cl(a,`${c} ${d}`)},cp=({root:a,action:b})=>{let c=a.query("GET_ITEM",b.id).filename;cl(a,`${b.status.main} ${c} ${b.status.sub}`)},cq=s({create:({root:a,props:b})=>{a.element.id=`filepond--assistant-${b.id}`,f(a.element,"role","status"),f(a.element,"aria-live","polite"),f(a.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:t({DID_LOAD_ITEM:({root:a,action:b})=>{if(!cn(a))return;a.element.textContent="";let c=a.query("GET_ITEM",b.id);ck.push(c.filename),clearTimeout(ci),ci=setTimeout(()=>{cm(a,ck.join(", "),a.query("GET_LABEL_FILE_ADDED")),ck.length=0},750)},DID_REMOVE_ITEM:({root:a,action:b})=>{cn(a)&&cm(a,b.item.filename,a.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:a,action:b})=>{let c=a.query("GET_ITEM",b.id).filename,d=a.query("GET_LABEL_FILE_PROCESSING_COMPLETE");cl(a,`${c} ${d}`)},DID_ABORT_ITEM_PROCESSING:co,DID_REVERT_ITEM_PROCESSING:co,DID_THROW_ITEM_REMOVE_ERROR:cp,DID_THROW_ITEM_LOAD_ERROR:cp,DID_THROW_ITEM_INVALID:cp,DID_THROW_ITEM_PROCESSING_ERROR:cp}),tag:"span",name:"assistant"}),cr=(a,b="-")=>a.replace(RegExp(`${b}.`,"g"),a=>a.charAt(1).toUpperCase()),cs=(a,b=16,c=!0)=>{let d=Date.now(),e=null;return(...f)=>{clearTimeout(e);let g=Date.now()-d,h=()=>{d=Date.now(),a(...f)};g<b?c||(e=setTimeout(h,b-g)):h()}},ct=a=>a.preventDefault(),cu=(a,b)=>{let c=a.query("GET_ALLOW_REPLACE"),d=a.query("GET_ALLOW_MULTIPLE"),e=a.query("GET_TOTAL_ITEMS"),f=a.query("GET_MAX_FILES"),g=b.length;return!d&&g>1?(a.dispatch("DID_THROW_MAX_FILES",{source:b,error:aw("warning",0,"Max files")}),!0):(f=d?f:1,(!!d||!c)&&!!B(f)&&e+g>f&&(a.dispatch("DID_THROW_MAX_FILES",{source:b,error:aw("warning",0,"Max files")}),!0))},cv=a=>{let b=a.query("GET_ALLOW_DROP"),c=a.query("GET_DISABLED"),d=b&&!c;if(d&&!a.ref.hopper){let b=((a,b,c)=>{var d;let e,f;a.classList.add("filepond--hopper");let{catchesDropsOnPage:g,requiresDropOnElement:h,filterItems:i=a=>a}=c,j=(d=g?document.documentElement:a,e=(a=>{let b=b5.find(b=>b.element===a);if(b)return b;let c=b7(a);return b5.push(c),c})(d),(f={element:a,filterElement:h,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}}).destroy=e.addListener(f),f),k="",l="";j.allowdrop=a=>b(i(a)),j.ondrop=(a,c)=>{let d=i(c);b(d)?(l="drag-drop",m.onload(d,a)):m.ondragend(a)},j.ondrag=a=>{m.ondrag(a)},j.onenter=a=>{l="drag-over",m.ondragstart(a)},j.onexit=a=>{l="drag-exit",m.ondragend(a)};let m={updateHopperState:()=>{k!==l&&(a.dataset.hopperState=l,k=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{j.destroy()}};return m})(a.element,b=>{let c=a.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!a.query("GET_DROP_VALIDATION")||b.every(b=>U("ALLOW_HOPPER_ITEM",b,{query:a.query}).every(a=>!0===a)&&c(b))},{filterItems:b=>{let c=a.query("GET_IGNORED_FILES");return b.filter(a=>!aD(a)||!c.includes(a.name.toLowerCase()))},catchesDropsOnPage:a.query("GET_DROP_ON_PAGE"),requiresDropOnElement:a.query("GET_DROP_ON_ELEMENT")});b.onload=(b,c)=>{let d=a.ref.list.childViews[0].childViews.filter(a=>a.rect.element.height),e=a.query("GET_ACTIVE_ITEMS").map(a=>d.find(b=>b.id===a.id)).filter(a=>a);T("ADD_ITEMS",b,{dispatch:a.dispatch}).then(b=>{var d;let f;if(cu(a,b))return!1;a.dispatch("ADD_ITEMS",{items:b,index:(d=a.ref.list,bo(f=d.childViews[0],e,{left:c.scopeLeft-f.rect.element.left,top:c.scopeTop-(d.rect.outer.top+d.rect.element.marginTop+d.rect.element.scrollTop)})),interactionMethod:2})}),a.dispatch("DID_DROP",{position:c}),a.dispatch("DID_END_DRAG",{position:c})},b.ondragstart=b=>{a.dispatch("DID_START_DRAG",{position:b})},b.ondrag=cs(b=>{a.dispatch("DID_DRAG",{position:b})}),b.ondragend=b=>{a.dispatch("DID_END_DRAG",{position:b})},a.ref.hopper=b,a.ref.drip=a.appendChildView(a.createChildView(bK))}else!d&&a.ref.hopper&&(a.ref.hopper.destroy(),a.ref.hopper=null,a.removeChildView(a.ref.drip))},cw=(a,b)=>{let c=a.query("GET_ALLOW_BROWSE"),d=a.query("GET_DISABLED"),e=c&&!d;e&&!a.ref.browser?a.ref.browser=a.appendChildView(a.createChildView(bF,{...b,onload:b=>{T("ADD_ITEMS",b,{dispatch:a.dispatch}).then(b=>{if(cu(a,b))return!1;a.dispatch("ADD_ITEMS",{items:b,index:-1,interactionMethod:3})})}}),0):!e&&a.ref.browser&&(a.removeChildView(a.ref.browser),a.ref.browser=null)},cx=a=>{let b=a.query("GET_ALLOW_PASTE"),c=a.query("GET_DISABLED"),d=b&&!c;if(d&&!a.ref.paster){let b,c;a.ref.paster=(b=a=>{c.onload(a)},c={destroy:()=>{let a;a=cg.indexOf(b),cg.splice(a,1),0===cg.length&&(document.removeEventListener("paste",ch),cf=!1)},onload:()=>{}},cg.includes(b)||(cg.push(b),cf||(cf=!0,document.addEventListener("paste",ch))),c),a.ref.paster.onload=b=>{T("ADD_ITEMS",b,{dispatch:a.dispatch}).then(b=>{if(cu(a,b))return!1;a.dispatch("ADD_ITEMS",{items:b,index:-1,interactionMethod:4})})}}else!d&&a.ref.paster&&(a.ref.paster.destroy(),a.ref.paster=null)},cy=t({DID_SET_ALLOW_BROWSE:({root:a,props:b})=>{cw(a,b)},DID_SET_ALLOW_DROP:({root:a})=>{cv(a)},DID_SET_ALLOW_PASTE:({root:a})=>{cx(a)},DID_SET_DISABLED:({root:a,props:b})=>{cv(a),cx(a),cw(a,b),a.query("GET_DISABLED")?a.element.dataset.disabled="disabled":a.element.removeAttribute("data-disabled")}}),cz=s({name:"root",read:({root:a})=>{a.ref.measure&&(a.ref.measureHeight=a.ref.measure.offsetHeight)},create:({root:a,props:b})=>{let c=a.query("GET_ID");c&&(a.element.id=c);let d=a.query("GET_CLASS_NAME");d&&d.split(" ").filter(a=>a.length).forEach(b=>{a.element.classList.add(b)}),a.ref.label=a.appendChildView(a.createChildView(bH,{...b,translateY:null,caption:a.query("GET_LABEL_IDLE")})),a.ref.list=a.appendChildView(a.createChildView(bw,{translateY:null})),a.ref.panel=a.appendChildView(a.createChildView(bh,{name:"panel-root"})),a.ref.assistant=a.appendChildView(a.createChildView(cq,{...b})),a.ref.data=a.appendChildView(a.createChildView(bP,{...b})),a.ref.measure=document.createElement("div"),a.ref.measure.style.height="100%",a.element.appendChild(a.ref.measure),a.ref.bounds=null,a.query("GET_STYLES").filter(a=>null!=a.value).map(({name:b,value:c})=>{a.element.dataset[b]=c}),a.ref.widthPrevious=null,a.ref.widthUpdated=cs(()=>{a.ref.updateHistory=[],a.dispatch("DID_RESIZE_ROOT")},250),a.ref.previousAspectRatio=null,a.ref.updateHistory=[];let e=window.matchMedia("(pointer: fine) and (hover: hover)").matches,f="PointerEvent"in window;a.query("GET_ALLOW_REORDER")&&f&&!e&&(a.element.addEventListener("touchmove",ct,{passive:!1}),a.element.addEventListener("gesturestart",ct));let g=a.query("GET_CREDITS");if(2===g.length){let b=document.createElement("a");b.className="filepond--credits",b.setAttribute("aria-hidden","true"),b.href=g[0],b.tabindex=-1,b.target="_blank",b.rel="noopener noreferrer",b.textContent=g[1],a.element.appendChild(b),a.ref.credits=b}},write:({root:a,props:b,actions:c})=>{var d;let e,f;if(cy({root:a,props:b,actions:c}),c.filter(a=>/^DID_SET_STYLE_/.test(a.type)).filter(a=>null!=a.data.value).map(({type:b,data:c})=>{let d=cr(b.substring(8).toLowerCase(),"_");a.element.dataset[d]=c.value,a.invalidateLayout()}),a.rect.element.hidden)return;a.rect.element.width!==a.ref.widthPrevious&&(a.ref.widthPrevious=a.rect.element.width,a.ref.widthUpdated());let g=a.ref.bounds;g||(g=a.ref.bounds=(e=(d=a).ref.measureHeight||null,{cappedHeight:parseInt(d.style.maxHeight,10)||null,fixedHeight:0===e?null:e}),a.element.removeChild(a.ref.measure),a.ref.measure=null);let{hopper:h,label:i,list:j,panel:k}=a.ref;h&&h.updateHopperState();let l=a.query("GET_PANEL_ASPECT_RATIO"),m=a.query("GET_ALLOW_MULTIPLE"),n=a.query("GET_TOTAL_ITEMS"),o=n===(m?a.query("GET_MAX_FILES")||1e6:1),p=c.find(a=>"DID_ADD_ITEM"===a.type);if(o&&p){let a=p.data.interactionMethod;i.opacity=0,m?i.translateY=-40:1===a?i.translateX=40:3===a?i.translateY=40:i.translateY=30}else o||(i.opacity=1,i.translateX=0,i.translateY=0);let q=(f=a.ref.list.childViews[0].childViews[0])?{top:f.rect.element.marginTop,bottom:f.rect.element.marginBottom}:{top:0,bottom:0},r=(a=>{let b=0,c=0,d=a.ref.list,e=d.childViews[0],f=e.childViews.filter(a=>a.rect.element.height),g=a.query("GET_ACTIVE_ITEMS").map(a=>f.find(b=>b.id===a.id)).filter(a=>a);if(0===g.length)return{visual:b,bounds:c};let h=e.rect.element.width,i=bo(e,g,d.dragCoordinates),j=g[0].rect.element,k=j.marginTop+j.marginBottom,l=j.marginLeft+j.marginRight,m=j.width+l,n=j.height+k,o=g.find(a=>a.markedForRemoval&&a.opacity<.45)?-1:0,p=g.length+ +(void 0!==i&&i>=0)+o,q=bn(h,m);return 1===q?g.forEach(a=>{let d=a.rect.element.height+k;c+=d,b+=d*a.opacity}):b=c=Math.ceil(p/q)*n,{visual:b,bounds:c}})(a),s=i.rect.element.height,t=!m||o?0:s,u=o?j.rect.element.marginTop:0,v=0===n?0:j.rect.element.marginBottom,w=t+u+r.visual+v,x=t+u+r.bounds+v;if(j.translateY=Math.max(0,t-j.rect.element.marginTop)-q.top,l){let b=a.rect.element.width,c=b*l;l!==a.ref.previousAspectRatio&&(a.ref.previousAspectRatio=l,a.ref.updateHistory=[]);let d=a.ref.updateHistory;if(d.push(b),d.length>4){let a=d.length,b=a-10,c=0;for(let e=a;e>=b;e--)if(d[e]===d[e-2]&&c++,c>=2)return}k.scalable=!1,k.height=c;let e=c-t-(v-q.bottom)-(o?u:0);r.visual>e?j.overflow=e:j.overflow=null,a.height=c}else if(g.fixedHeight){k.scalable=!1;let a=g.fixedHeight-t-(v-q.bottom)-(o?u:0);r.visual>a?j.overflow=a:j.overflow=null}else if(g.cappedHeight){let b=w>=g.cappedHeight,c=Math.min(g.cappedHeight,w);k.scalable=!0,k.height=b?c:c-q.top-q.bottom;let d=c-t-(v-q.bottom)-(o?u:0);w>g.cappedHeight&&r.visual>d?j.overflow=d:j.overflow=null,a.height=Math.min(g.cappedHeight,x-q.top-q.bottom)}else{let b=n>0?q.top+q.bottom:0;k.scalable=!0,k.height=Math.max(s,w-b),a.height=Math.max(s,x-b)}a.ref.credits&&k.heightCurrent&&(a.ref.credits.style.transform=`translateY(${k.heightCurrent}px)`)},destroy:({root:a})=>{a.ref.paster&&a.ref.paster.destroy(),a.ref.hopper&&a.ref.hopper.destroy(),a.element.removeEventListener("touchmove",ct),a.element.removeEventListener("gesturestart",ct)},mixins:{styles:["height"]}}),cA=(a={})=>{let b={};return d(W(),(a,c)=>{b[a]=c[0]}),((a={})=>{let b,c,f=null,g=W(),h=((a,b=[],c=[])=>{let d={...a},e=[],f=[],g=(a,b,c)=>{c&&!document.hidden?f.push({type:a,data:b}):(j[a]&&j[a](b),e.push({type:a,data:b}))},h=(a,...b)=>i[a]?i[a](...b):null,i={};b.forEach(a=>{i={...a(d),...i}});let j={};return c.forEach(a=>{j={...a(g,h,d),...j}}),{getState:()=>({...d}),processActionQueue:()=>{let a=[...e];return e.length=0,a},processDispatchQueue:()=>{let a=[...f];f.length=0,a.forEach(({type:a,data:b})=>{g(a,b)})},dispatch:g,query:h}})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:(b={},d(g,a=>{var c,d;let e,f=g[a];b[a]=(c=f[0],d=f[1],e=c,{enumerable:!0,get:()=>e,set:a=>{e=H(a,c,d)}})}),e(b))},[ai,a=>{let b={};return d(g,c=>{b[`GET_${I(c,"_").toUpperCase()}`]=b=>a.options[c]}),b}],[aN,(a,b,c)=>{let e={};return d(g,b=>{let d=I(b,"_").toUpperCase();e[`SET_${d}`]=e=>{try{c.options[b]=e.value}catch(a){}a(`DID_SET_${d}`,{value:c.options[b]})}}),e}]);h.dispatch("SET_OPTIONS",{options:a});let i=()=>{document.hidden||h.dispatch("KICK")};document.addEventListener("visibilitychange",i);let j=null,k=!1,l=!1,m=null,n=null,o=()=>{k||(k=!0),clearTimeout(j),j=setTimeout(()=>{k=!1,m=null,n=null,l&&(l=!1,h.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",o);let p=cz(h,{id:J()}),q=!1,r=!1,s=a=>b=>{let c={type:a};if(!b)return c;if(b.hasOwnProperty("error")&&(c.error=b.error?{...b.error}:null),b.status&&(c.status={...b.status}),b.file&&(c.output=b.file),b.source)c.file=b.source;else if(b.item||b.id){let a=b.item?b.item:h.query("GET_ITEM",b.id);c.file=a?N(a):null}return b.items&&(c.items=b.items.map(N)),/progress/.test(a)&&(c.progress=b.progress),b.hasOwnProperty("origin")&&b.hasOwnProperty("target")&&(c.origin=b.origin,c.target=b.target),c},t={DID_DESTROY:s("destroy"),DID_INIT:s("init"),DID_THROW_MAX_FILES:s("warning"),DID_INIT_ITEM:s("initfile"),DID_START_ITEM_LOAD:s("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:s("addfileprogress"),DID_LOAD_ITEM:s("addfile"),DID_THROW_ITEM_INVALID:[s("error"),s("addfile")],DID_THROW_ITEM_LOAD_ERROR:[s("error"),s("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[s("error"),s("removefile")],DID_PREPARE_OUTPUT:s("preparefile"),DID_START_ITEM_PROCESSING:s("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:s("processfileprogress"),DID_ABORT_ITEM_PROCESSING:s("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:s("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:s("processfiles"),DID_REVERT_ITEM_PROCESSING:s("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[s("error"),s("processfile")],DID_REMOVE_ITEM:s("removefile"),DID_UPDATE_ITEMS:s("updatefiles"),DID_ACTIVATE_ITEM:s("activatefile"),DID_REORDER_ITEMS:s("reorderfiles")},w=a=>{let b={pond:C,...a};delete b.type,p.element.dispatchEvent(new CustomEvent(`FilePond:${a.type}`,{detail:b,bubbles:!0,cancelable:!0,composed:!0}));let c=[];a.hasOwnProperty("error")&&c.push(a.error),a.hasOwnProperty("file")&&c.push(a.file);let d=["type","error","file"];Object.keys(a).filter(a=>!d.includes(a)).forEach(b=>c.push(a[b])),C.fire(a.type,...c);let e=h.query(`GET_ON${a.type.toUpperCase()}`);e&&e(...c)},x=a=>new Promise((b,c)=>{h.dispatch("REQUEST_ITEM_PREPARE",{query:a,success:a=>{b(a)},failure:a=>{c(a)}})}),y=(a,b)=>{let c;return"object"!=typeof a||(c=a).file&&c.id||b||(b=a,a=void 0),h.dispatch("REMOVE_ITEM",{...b,query:a}),null===h.query("GET_ACTIVE_ITEM",a)},z=(...a)=>new Promise((b,c)=>{let d=[],e={};if(Array.isArray(a[0]))d.push.apply(d,a[0]),Object.assign(e,a[1]||{});else{let b=a[a.length-1];"object"!=typeof b||b instanceof Blob||Object.assign(e,a.pop()),d.push(...a)}h.dispatch("ADD_ITEMS",{items:d,index:e.index,interactionMethod:1,success:b,failure:c})}),A=()=>h.query("GET_ACTIVE_ITEMS"),B=a=>new Promise((b,c)=>{h.dispatch("REQUEST_ITEM_PROCESSING",{query:a,success:a=>{b(a)},failure:a=>{c(a)}})}),C={...K(),_read:()=>{k&&(n=window.innerWidth,m||(m=n),l||n===m||(h.dispatch("DID_START_RESIZE"),l=!0)),r&&q&&(q=null===p.element.offsetParent),q||(p._read(),r=p.rect.element.hidden)},_write:a=>{let b=h.processActionQueue().filter(a=>!/^SET_/.test(a.type));if(!q||b.length){var c,d;(d=b).length&&d.filter(a=>t[a.type]).forEach(a=>{let b=t[a.type];(Array.isArray(b)?b:[b]).forEach(b=>{"DID_INIT_ITEM"===a.type?w(b(a.data)):setTimeout(()=>{w(b(a.data))},0)})}),q=p._write(a,b,l),(c=h.query("GET_ITEMS")).forEach((a,b)=>{a.released&&c.splice(b,1)}),q&&h.processDispatchQueue()}},...(c={},d(g,a=>{c[a]={get:()=>h.getState().options[a],set:b=>{h.dispatch(`SET_${I(a,"_").toUpperCase()}`,{value:b})}}}),c),setOptions:a=>h.dispatch("SET_OPTIONS",{options:a}),addFile:(a,b={})=>new Promise((c,d)=>{z([{source:a,options:b}],{index:b.index}).then(a=>c(a&&a[0])).catch(d)}),addFiles:z,getFile:a=>h.query("GET_ACTIVE_ITEM",a),processFile:B,prepareFile:x,removeFile:y,moveFile:(a,b)=>h.dispatch("MOVE_ITEM",{query:a,index:b}),getFiles:A,processFiles:(...a)=>{let b=Array.isArray(a[0])?a[0]:a;return b.length?Promise.all(b.map(B)):Promise.all(A().filter(a=>(a.status!==O.IDLE||a.origin!==P.LOCAL)&&a.status!==O.PROCESSING&&a.status!==O.PROCESSING_COMPLETE&&a.status!==O.PROCESSING_REVERT_ERROR).map(B))},removeFiles:(...a)=>{let b,c=Array.isArray(a[0])?a[0]:a;"object"==typeof c[c.length-1]?b=c.pop():Array.isArray(a[0])&&(b=a[1]);let d=A();return c.length?c.map(a=>"number"==typeof a?d[a]?d[a].id:null:a).filter(a=>a).map(a=>y(a,b)):Promise.all(d.map(a=>y(a,b)))},prepareFiles:(...a)=>{let b=Array.isArray(a[0])?a[0]:a;return Promise.all((b.length?b:A()).map(x))},sort:a=>h.dispatch("SORT",{compare:a}),browse:()=>{var a=p.element.querySelector("input[type=file]");a&&a.click()},destroy:()=>{C.fire("destroy",p.element),h.dispatch("ABORT_ALL"),p._destroy(),window.removeEventListener("resize",o),document.removeEventListener("visibilitychange",i),h.dispatch("DID_DESTROY")},insertBefore:a=>u(p.element,a),insertAfter:a=>v(p.element,a),appendTo:a=>a.appendChild(p.element),replaceElement:a=>{u(p.element,a),a.parentNode.removeChild(a),f=a},restoreElement:()=>{f&&(v(f,p.element),p.element.parentNode.removeChild(p.element),f=null)},isAttachedTo:a=>p.element===a||f===a,element:{get:()=>p.element},status:{get:()=>h.query("GET_STATUS")}};return h.dispatch("DID_INIT"),e(C)})({...b,...a})},cB=(a,b)=>{d(b,(b,c)=>{d(a,(d,e)=>{let f,g=new RegExp(b);if(!g.test(d)||(delete a[d],!1===c))return;if(y(c)){a[c]=e;return}let h=c.group;E(c)&&!a[h]&&(a[h]={}),a[h][(f=d.replace(g,"")).charAt(0).toLowerCase()+f.slice(1)]=e}),c.mapping&&cB(a[c.group],c.mapping)})},cC=["fire","_read","_write"],cD=a=>{let b={};return L(a,b,cC),b},cE=(a,b)=>a.replace(/(?:{([a-zA-Z]+)})/g,(a,c)=>b[c]),cF=a=>{let b=new Blob(["(",a.toString(),")()"],{type:"application/javascript"}),c=URL.createObjectURL(b),d=new Worker(c);return{transfer:(a,b)=>{},post:(a,b,c)=>{let e=J();d.onmessage=a=>{a.data.id===e&&b(a.data.message)},d.postMessage({id:e,message:a},c)},terminate:()=>{d.terminate(),URL.revokeObjectURL(c)}}},cG=a=>new Promise((b,c)=>{let d=new Image;d.onload=()=>{b(d)},d.onerror=a=>{c(a)},d.src=a}),cH=(a,b)=>{let c=a.slice(0,a.size,a.type);return c.lastModifiedDate=a.lastModifiedDate,c.name=b,c},cI=a=>cH(a,a.name),cJ=[],cK=a=>{if(cJ.includes(a))return;cJ.push(a);let b=a({addFilter:V,utils:{Type:R,forin:d,isString:y,isFile:aD,toNaturalFileSize:aT,replaceInString:cE,getExtensionFromFilename:al,getFilenameWithoutExtension:aC,guesstimateMimeType:bT,getFileFromBlob:ao,getFilenameFromURL:ak,createRoute:t,createWorker:cF,createView:s,createItemAPI:N,loadImage:cG,copyFile:cI,renameFile:cH,createBlob:ap,applyFilterChain:T,text:aP,getNumericAspectRatioFromString:Z},views:{fileActionButton:aS}});Object.assign(X,b.options)},cL=(b=!1,()=>b),cM=[],cN=()=>{},cO={},cP={},cQ=cN,cR=cN,cS=cN,cT=cN,cU=cN,cV=cN,cW=cN;if(cL()){((a,b,c=60)=>{let d="__framePainter";if(window[d]){window[d].readers.push(a),window[d].writers.push(b);return}window[d]={readers:[a],writers:[b]};let e=window[d],f=1e3/c,g=null,h=null,i=null,j=null,k=()=>{document.hidden?(i=()=>window.setTimeout(()=>l(performance.now()),f),j=()=>window.clearTimeout(h)):(i=()=>window.requestAnimationFrame(l),j=()=>window.cancelAnimationFrame(h))};document.addEventListener("visibilitychange",()=>{j&&j(),k(),l(performance.now())});let l=a=>{h=i(l),g||(g=a);let b=a-g;b<=f||(g=a-b%f,e.readers.forEach(a=>a()),e.writers.forEach(b=>b(a)))};return k(),l(performance.now())})(()=>{cM.forEach(a=>a._read())},a=>{cM.forEach(b=>b._write(a))});let a=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:cL,create:cQ,destroy:cR,parse:cS,find:cT,registerPlugin:cU,setOptions:cW}})),document.removeEventListener("DOMContentLoaded",a)};"loading"!==document.readyState?setTimeout(()=>a(),0):document.addEventListener("DOMContentLoaded",a);let b=()=>d(W(),(a,b)=>{cP[a]=b[1]});cO={...O},cP={},b(),cQ=(...a)=>{let b=((...a)=>a[0]instanceof HTMLElement?((a,b={})=>{let c={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};U("SET_ATTRIBUTE_TO_OPTION_MAP",c);let e={...b},g=((a,b={})=>{let c=[];d(a.attributes,b=>{c.push(a.attributes[b])});let e=c.filter(a=>a.name).reduce((b,c)=>{let d=f(a,c.name);return b[cr(c.name.replace(/^data-/,""))]=d===c.name||d,b},{});return cB(e,b),e})("FIELDSET"===a.nodeName?a.querySelector("input[type=file]"):a,c);Object.keys(g).forEach(a=>{E(g[a])?(E(e[a])||(e[a]={}),Object.assign(e[a],g[a])):e[a]=g[a]}),e.files=(b.files||[]).concat(Array.from(a.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));let h=cA(e);return a.files&&Array.from(a.files).forEach(a=>{h.addFile(a)}),h.replaceElement(a),h})(...a):cA(...a))(...a);return b.on("destroy",cR),cM.push(b),cD(b)},cR=a=>{let b=cM.findIndex(b=>b.isAttachedTo(a));return b>=0&&(cM.splice(b,1)[0].restoreElement(),!0)},cS=a=>Array.from(a.querySelectorAll(".filepond")).filter(a=>!cM.find(b=>b.isAttachedTo(a))).map(a=>cQ(a)),cT=a=>{let b=cM.find(b=>b.isAttachedTo(a));return b?cD(b):null},cU=(...a)=>{a.forEach(cK),b()},cV=()=>{let a={};return d(W(),(b,c)=>{a[b]=c[0]}),a},cW=a=>(E(a)&&(cM.forEach(b=>{b.setOptions(a)}),d(a,(a,b)=>{X[a]&&(X[a][0]=H(b,X[a][0],X[a][1]))})),cV())}a.s(["FileStatus",()=>cO,"create",()=>cQ,"registerPlugin",()=>cU,"supported",()=>cL],883924);let cX=cL(),cY=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];class cZ extends c.default.Component{constructor(a){super(a),this.allowFilesSync=!0}componentDidMount(){if(this._input=this._element.querySelector('input[type="file"]'),this._inputClone=this._input.cloneNode(),!cX)return;let a=Object.assign({},this.props);if(a.onupdatefiles){let b=a.onupdatefiles;a.onupdatefiles=a=>{this.allowFilesSync=!1,b(a)}}this._pond=cQ(this._input,a),Object.keys(this._pond).filter(a=>!cY.includes(a)).forEach(a=>{this[a]=this._pond[a]})}componentWillUnmount(){if(!this._pond)return;let a=document.createElement("div");a.append(this._pond.element),a.id="foo",this._pond.destroy(),this._pond=void 0,this._element.append(this._inputClone)}shouldComponentUpdate(){return!!this.allowFilesSync||(this.allowFilesSync=!0,!1)}componentDidUpdate(){if(!this._pond)return;let a=Object.assign({},this.props);delete a.onupdatefiles,this._pond.setOptions(a)}render(){let{id:a,name:b,className:d,allowMultiple:e,required:f,captureMethod:g,acceptedFileTypes:h}=this.props;return(0,c.createElement)("div",{className:"filepond--wrapper",ref:a=>this._element=a},(0,c.createElement)("input",{type:"file",name:b,id:a,accept:h,multiple:e,required:f,className:d,capture:g}))}}a.s(["FilePond",()=>cZ],276323)}];

//# sourceMappingURL=39735_react-filepond_dist_react-filepond_esm_88b7010c.js.map